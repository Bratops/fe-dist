(function(){"use strict";angular.module("brasFeApp",["ngCookies","LocalStorageModule","ngResource","ngAnimate","ngSanitize","ui.router","ui.bootstrap","restangular","duScroll","angular-growl","timer","ngGrid","ui.tree","angular-loading-bar","xeditable","flow","youtube-embed","checklist-model"]).config(["flowFactoryProvider",function(a){return a.defaults={target:"",permanentErrors:[404,500,501]},a.on("catchAll",function(){return""})}]).config(["localStorageServiceProvider",function(a){return a.setPrefix("user")}]).config(["cfpLoadingBarProvider",function(a){return a.includeSpinner=!1,a.includeBar=!0,a.latencyThreshold=1e3}]).config(["growlProvider",function(a){return a.globalTimeToLive(1e4),a.onlyUniqueMessages(!1),a.globalReversedOrder(!0),a.globalDisableCountDown(!0)}]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(a,b,c){return b.otherwise("/"),c.html5Mode(!0)}]).config(["$httpProvider",function(a){return a.interceptors.push("errorHandler")}])}).call(this),function(){"use strict";angular.module("brasFeApp").controller("BulletinCtrl",["$scope","bulletin",function(){}]),angular.module("brasFeApp").service("bulletin",["sessionServ","growl",function(a,b){var c,d,e,f,g;return c=function(a){var c;return(c=b[a.status])(a.body,{title:a.title,ttl:3e3})},e=function(a,b){var c;return c=a||new Date,c.setDate(c.getDate()+b),c},g=function(){return{start_time:new Date,end_time:e(new Date,1),title:"a",body:"b"}},f=function(){return{minDate:new Date,open:!1,startingDay:1}},d={init:!1,ensure_end:function(a){return a>d.data.msg.end_time?d.data.msg.end_time=e(a,1):void 0},cancel_edit:function(){return d.data.msg=g()},add_msg:function(){var b,e;return b=_.clone(d.data.msg),e=a.rest,e.one("manager","msgs").post("",{msg:b}).then(function(a){return c(a.msg),d.data.msgs.push(a.data),d.data.msg=g()})},update_msg:function(){var b,e;return b=_.clone(d.data.msg),e=a.rest,e.one("manager/msgs",b.id).patch({msg:b}).then(function(a){return c(a.msg)})},del_msg:function(b){var e;return e=a.rest,e.one("manager/msgs",b.id).remove().then(function(a){return c(a.msg),"success"===a.msg.status?(d.data["new"]=d.data.edit=!1,d.data.msgs=_.reject(d.data.msgs,{id:a.id})):void 0})},load_pub:function(){return d.init?void 0:(d.init=!0,d.load_pub_msgs())},load_pub_msgs:function(){var b;return b=a.fest(),b.all("msgs").getList().then(function(a){return d.data.msgs=a})},load:function(){return d.init?void 0:(d.init=!0,d.load_msgs())},load_msgs:function(){var b;return b=a.fest(),b.all("manager/msgs").getList().then(function(a){return d.data.msgs=a})},set_msg:function(a){var b;return b=null!=a?a:g(),d.data.msg=b},data:{msgs:[],"new":!1,edit:!1,msg:g(),sdate_opt:f(),edate_opt:f()}}}])}.call(this),function(){"use strict";angular.module("brasFeApp").factory("errorHandler",["$q","$log","$rootScope","growl",function(a,b,c,d){var e;return e=function(a){var b,c;return a&&a.msg?(c=d[a.status],b=a.msg,c(b.body,{title:b.title})):void console.log("unscoped server error")},{response:function(b){return b||a.when(b)},responseError:function(f){var g;switch(b.debug("error with status "+f.status+" and data: "+f.data.message),g=f.data,e(g),c.$broadcast("httpError",f.status),f.status){case 400:d.error("如果您仍需這個功能，請來信:<mailto:little_beaver@gmail.com>",{title:"參數錯誤"});break;case 404:d.error("找不到您要的功能",{title:"找不到海狸"});break;case 405:d.error("系統回應：您無法使用此功能",{title:"被限制的功能"});break;case 406:d.error("抱歉，系統無法處理您的請求",{title:"無法處理的請求"});break;case 408:d.error("請確認連線狀態及網路速度",{title:"請求逾時"});break;case 0:d.error("No connection, check your internet connection. Or the server might be maintainace.");break;default:f.status>=500?d.error("正在記錄錯誤，並且尋找海狸工程師來修理",{title:"海狸忙碌中..."}):f.status<400&&d.error("Error: "+f,{title:"未知的錯誤",ttl:1e6})}return a.reject(f)}}}])}.call(this),function(){"use strict";angular.module("brasFeApp").directive("landingSize",["$window",function(a){return function(b){var c;return c=angular.element(a),b.getWindowDimensions=function(){return{h:c.height(),w:c.width()}},b.$watch(b.getWindowDimensions,function(a){return b.windowHeight=a.h,b.windowWidth=a.w,b.style=function(){return{height:a.h-100+"px",width:"100%"}}},!0),c.bind("resize",function(){return b.$apply()})}}])}.call(this),function(){"use strict";angular.module("brasFeApp").service("notify",["growl",function(a){var b;return b={ttl:3e3,g:function(c){var d;return(d=a[c.status])(c.body,{title:c.title,ttl:b.ttl})},c:function(a){return console.log(a)},gc:function(a){return b.g(a),b.c(a)}}}])}.call(this),function(){"use strict";angular.module("brasFeApp").service("sessionInjector",["sessionServ",function(a){var b;return b={request:function(b){return a.isGuest()||(b.headers["x-auth-login"]=a.user.login_alias,b.headers["x-auth-token"]=a.user.auth_token),b}}}])}.call(this),function(){"use strict";angular.module("brasFeApp").factory("sestangular",["Restangular",function(a){var b;return b=function(a){return"http://"+a+"/"},{rest:function(c,d){return d.cache=null!=d.cache?d.cache:!0,a.withConfig(function(a){return a.setBaseUrl(b(d.host)),a.setDefaultHttpFields({cache:d.cache,withCredentials:!0}),a.setRestangularFields({id:"_id",route:"restangularRoute",selfLink:"self.href"}),a.setDefaultHeaders({"Content-Type":"application/json","X-AUTH-LOGIN":c.login_alias||"","X-AUTH-TOKEN":c.auth_token||"","X-Requested-With":"XMLHttpRequest",Accept:"application/bebras.tw; ver=1"})})}}}])}.call(this),function(){"use strict";angular.module("brasFeApp").controller("DashAdminCtrl",["$scope","$state","dashUser","menu","sessionServ",function(a,b,c,d,e){var f,g,h,i;return h=e,i="dashboard.admin",g=function(a){var b,c;return c=a.source.nodesScope.$modelValue,b=0,_.each(c,function(a){return a.pos=b,b+=1})},f=function(a){return a.$element.addClass("dragging")},a.data={menu:{serv:d.data,selected:{}},menuTree:{beforeDrag:f,dropped:g},users:{},edit_role:""},a.userGrid={data:"data.users"},a.$on("$stateChangeStart",function(a,b){return h.auth_state(a,b)}),a.$on("$stateChangeSuccess",function(a,d){return h.is_valid_state(b)?d.name===""+i+".users"?c.load_users():d.name===""+i+".tasks"?c.load_users():void 0:void 0}),a.$on("users_loaded",function(){return a.data.users=c.users}),a.$watch("data.edit_role",function(a){return a?d.get_menu_list(a):void 0}),a.$on("cfpLoadingBar:loading",function(){}),a.not_in_base=function(){return null==a.user?!1:!b.is("dashboard."+a.user.role.name)},a.show_menu_item=function(b){var c;return c=b.$modelValue,a.data.menu.selected=c},a.menu_item_selected=function(b){return a.data.menu.selected===b},a.menu_cancel_edit=function(){return a.data.menu.selected={},a.data.menu.serv.raw={},b.go(i)},a.menu_save=function(){return d.update_raw(a.data.edit_role)},a.menu_mark_as_remove=function(a){var b;return b=a.$modelValue,b.destroy=!b.destroy},a.menu_add=function(){var b;return b=a.data.menu.serv.raw.length,a.data.menu.serv.raw.push({id:-1,name:"New item",pos:b,nodes:[]})}}])}.call(this),function(){"use strict";angular.module("brasFeApp").controller("DaMaBulletinCtrl",["$scope","bulletin",function(a,b){var c;return c="dashboard.manager.bulletin",a.data=b.data,a.$on("$stateChangeSuccess",function(){return b.load()}),a.$watch("data.msg.start_time",function(a){return b.ensure_end(a)}),a.msg_editor_visible=function(){return a.data["new"]||a.data.edit},a.cancel_editor=function(){return a.data["new"]=!1,a.data.edit=!1,b.cancel_edit()},a.new_msg=function(){return a.data["new"]=!0,a.data.edit=!1,b.set_msg()},a.del_msg=function(a){return confirm("確定移除？")?b.del_msg(a):void 0},a.edit_msg=function(c){return a.data["new"]=!1,a.data.edit=!0,b.set_msg(c)},a.add_msg=function(){return a.data["new"]=!1,b.add_msg()},a.update_msg=function(){return a.data.edit=!1,b.update_msg()},a.open_calendar=function(b,c){return b.preventDefault(),b.stopPropagation(),"edate_opt"===c&&(a.data[c].minDate=a.data.msg.start_time),a.data[c].open=!a.data[c].open},a.msg_start_cal_disable=function(){return!1},a.msg_end_cal_disable=function(){return!1}}])}.call(this),function(){"use strict";angular.module("brasFeApp").controller("DaMaUsersCtrl",["$scope","managerUsers",function(a,b){var c;return c=b,a.data=c.data,a.load_user=function(a){return c.load_users(a)},a.user_style=function(){return a.data.mod},a.$watch("data.pager.page",function(a,b){return a!==b?c.load_users():void 0}),a.$watch("data.pager.per_page",function(a,b){return a!==b&&""!==c.data.mod?c.load_users():void 0}),a.is_teacher_applicant=function(a){return"teacher_applicant"===a.role.name},a.mark_teacher=function(a){return c.mark_teacher(a)}}])}.call(this),function(){"use strict";angular.module("brasFeApp").controller("DashManagerCtrl",["$scope",function(){var a;return a="dashboard.manager"}])}.call(this),function(){"use strict";angular.module("brasFeApp").controller("DashMenuCtrl",["$scope","$state","menu",function(a,b,c){return a.data=c.data,a.$on("$stateChangeSuccess",function(){return b.includes("dashboard.**")?(c.load(),a.data=c.data):void 0}),a.$on("role_switched",function(){return c.reload()}),a.menu_click=function(d){var e;return a.clicked=d,c.data.clicked=d,e="dashboard."+c.role()+"."+d.link,b.transitionTo(e)}}])}.call(this),function(){"use strict";angular.module("brasFeApp").controller("DashStudentCtrl",["$scope",function(a){return a.message="studnet Hello"}])}.call(this),function(){"use strict";angular.module("brasFeApp").controller("DaTeEnrollmentsCtrl",["$scope","$stateParams","studentEnrollments",function(a,b,c){var d,e;return e="dashboard.teacher",d=c,a.data=d.data,a.$on("enroll_next",function(b,c){return a.data.users.length>c?d.enroll(a.data.users[c],c):void 0}),a.$on("$stateChangeSuccess",function(){return d.set_gid(b.id),d.load()}),a.file_added=function(b,c){return c.preventDefault(),d.read_csv(b.file).then(function(c){var e;return e=a.data.users.length,a.data.users=a.data.users.concat(c),d.enroll(a.data.users[e],e),b.cancel()})},a.delete_checked=function(){return d.delete_checked()},a.$watch("check_all",function(b){return d.data.del_users=b?a.data.users.map(function(a){return a.id}):[]}),a.new_enrollment=function(){return d.new_enrollment()},a.make_dirty=function(a){return a.dirty=!0},a.save_edited=function(){return d.save_edit()}}])}.call(this),function(){"use strict";angular.module("brasFeApp").controller("DaTeGroupsCtrl",["$scope","dashTeacher",function(a,b){var c;return c="dashboard.teacher",a.data=b.data,a.$on("$stateChangeSuccess",function(){return b.load_groups()}),a.group_new=function(){var a;return a=b.data.groups["new"],b.data.groups["new"]=!a},a.cant_add_group=function(b){return a.data.groups.new_submitted||b.$invalid},a.cant_update_group=function(b){return a.data.groups.edit_submitted||b.$invalid},a.group_update=function(c){return a.data.groups.edit=!1,b.update_group(),c.$setPristine()},a.group_add=function(c){return a.data.groups["new"]=!1,b.add_group(),c.$setPristine()},a.del_group=function(a){return confirm("確定移除？")?b.del_group(a):void 0},a.group_new_cancel=function(){return a.data.groups.new_submitted=!1,a.data.groups["new"]=!1,a.data.groups.edit=!1},a.open_calendar=function(b){return b.preventDefault(),b.stopPropagation(),a.data.groups.exdate_opt.open=!a.data.groups.exdate_opt.open},a.group_exdate_cal_disable=function(a,b){var c;return c=a.getDay(),"day"===b&&(0===c||6===c)},a.form_invalid=function(a){return a.$invalid&&!a.$pristine},a.reload_groups=function(){return b.load_groups(!0)},a.klass_str=function(a){var c;return c=b.find_local(a,"klasses"),c.name},a.extime_str=function(a){var c;return c=b.find_local(a,"time_sec"),c.name},a.edit_group=function(c){var d;return d=a.data.groups.edit,a.data.groups.edit=!d,d?void 0:b.edit_group(c)}}])}.call(this),function(){"use strict";angular.module("brasFeApp").controller("DashTeacherCtrl",["$scope",function(a){var b;return b="dashboard.teacher",a.$on("$stateChangeSuccess",function(){return""})}])}.call(this),function(){"use strict";angular.module("brasFeApp").controller("DaUsGroupsCtrl",["$scope","$state","userGroup",function(a,b,c){var d,e;return d="dashboard.user",e=c,a.data=e.data,a.$on("$stateChangeSuccess",function(){return""}),a.join_form_visible=function(){return e.data.join.show},a.join_grp=function(b){return e.data.join.show=!e.data.join.show,e.data.join.show?void 0:(b.$setPristine(),a.school="",e.new_join())},a.cancel=function(b){return a.join_grp(b)},a.get_school_list=function(a){return e.sclist(a).then(function(a){return a})},a.$watch("school",function(a){var b;return b=e.data.join.form,"string"==typeof a&&delete b.moeid,a&&"object"==typeof a&&"moeid"in a?b.moeid=a.moeid:void 0}),a.set_moeid=function(a){var b;return b=e.data.join.form,b.moeid=a.moeid},a.field_not_set=function(a,b){var c,d;return c=e.data.join.form,d=!(a in c&&null!=c[a]),d&&!b[a].$pristine},a.join=function(){return e.join()}}])}.call(this),function(){"use strict";angular.module("brasFeApp").controller("DashUserCtrl",["$scope","$state","sessionServ",function(a){var b;return b="dashboard.user",a.$on("$stateChangeSuccess",function(){})}])}.call(this),function(){"use strict";var a,b,c;a=function(a){return a[0].toUpperCase()+a.slice(1)},b={base:function(b){return{url:"",templateUrl:"app/dashboard/view/base.html",parent:"dashboard",views:{menu:{templateUrl:"app/dashboard/view/menu.html",controller:"DashMenuCtrl"},panel:{templateUrl:"app/dashboard/view/"+b+"/base.html",controller:"Dash"+a(b)+"Ctrl"}}}},extend:function(a,c){var d;return d=b.base(a),d.parent="dashboard."+a,d.url="/"+c,d.views={box:{templateUrl:"app/dashboard/view/"+a+"/"+c+".html"}},d},groups:function(a){var c,d;return d="teacher",c=b.extend(d,"groups"),c.parent="dashboard."+d+".groups",c.url="/:id/"+a,c.views={details:{templateUrl:"app/dashboard/view/"+d+"/groups/"+a+".html",controller:"DaTeEnrollmentsCtrl"}},c},magic:function(c,d){var e,f,g;return null==d?b.base(c):(g=b.extend(c,d),f=["manager","teacher","user"],_.include(f,c)&&(e="Da"+a(c.substr(0,2))+a(d)+"Ctrl",g.views.box.controller=e),g)},m:function(a,c){return b.magic(a,c)},admin:"dashboard.admin",manager:"dashboard.manager",teacher:"dashboard.teacher",student:"dashboard.student",user:"dashboard.user",dbmain:{url:"dashboard",parent:"root","abstract":!0,views:{main:{templateUrl:"app/dashboard/view/base.html",controller:"DashboardCtrl"}}}},c=b,angular.module("brasFeApp").config(["$stateProvider",function(a){return a.state("dashboard",c.dbmain).state(c.student,c.m("student")).state(c.user,c.m("user")).state(""+c.user+".groups",c.m("user","groups")).state(c.teacher,c.m("teacher")).state(""+c.teacher+".groups",c.m("teacher","groups")).state(""+c.teacher+".groups.enrollments",c.groups("enrollments")).state(c.manager,c.m("manager")).state(""+c.manager+".bulletin",c.m("manager","bulletin")).state(""+c.manager+".users",c.m("manager","users")).state(c.admin,c.m("admin")).state(""+c.admin+".users",c.m("admin","users")).state(""+c.admin+".tasks",c.m("admin","tasks")).state(""+c.admin+".menu",c.m("admin","menu"))}]),angular.module("brasFeApp").controller("DashboardCtrl",["$scope","$state","menu","sessionServ","growl",function(a,b,c,d,e){var f,g;return g=d,g.warm_up(),a.data={menu:c.data,role:{}},a.$on("$stateChangeStart",function(a,b){return g.auth_state(a,b)}),f=function(b){var c,d;return d=a.user.roles,c=_.findIndex(d,function(a){return a.id===b.id}),0>c?d[0]:d[c]},a.$on("$stateChangeSuccess",function(c,d){var e;return g.auth_user(d,b),g.is_valid_state(b)?(e=g.user,a.user=e,a.data.role=f(e.role)):void 0}),a.$on("redirect",function(a,c){return"dashboard"===c?b.go(c+"."+g.user.role.name):void 0}),a.$watch("data.role",function(a,b){return b.id!==a.id?g.switch_role(a.id):void 0}),a.$on("$stateNotFound",function(a,b){return console.log(b.name),e.error("未實作的功能",{title:"Oops"}),a.preventDefault()}),a.logout=function(){return g.logout()}}])}.call(this),function(){"use strict";angular.module("brasFeApp").service("dashTeacher",["sessionServ","growl",function(a,b){var c,d,e,f,g,h;return c=[{name:"普通班未分組",value:1},{name:"自然組",value:2},{name:"社會組",value:3},{name:"人文社會資優班",value:4},{name:"數理資優班",value:5},{name:"資訊相關科別",value:6},{name:"其他技職科別",value:7},{name:"特殊班",value:8},{name:"其他(請註記)",value:0}],f=[{name:"上午(0730~1230)",value:0},{name:"下午(1300~1800)",value:1},{name:"晚上(1800~2200)",value:2}],d=function(a){var c;return(c=b[a.status])(a.body,{title:a.title,ttl:3e3})},h=function(){return{klass:c[0],exdate:"2014/11/10",extime:f[0],grade:10,note:"",name:""}},g=function(a){var b;return b=_.clone(a,!0),b.klass=a.klass.value,b.extime=a.extime.value,b},e={notify_proc:function(){return d({status:"info",title:"處理中",body:"請稍後"})},add_group:function(){var b,c;return e.notify_proc(),c=a.rest,b=g(e.data.groups.form_group),c.one("teacher").post("ugroups",{grp:b}).then(function(a){return d(a.msg),"success"===a.msg.status?e.data.groups.list.push(a.data):void 0}),e.data.groups.form_group=h()},update_group:function(){var b,c;return e.notify_proc(),c=a.rest,b=g(e.data.groups.form_group),c.one("teacher/ugroups",b.id).patch({grp:b}).then(function(a){var c;return d(a.msg),"success"===a.msg.status?(c=_.findIndex(e.data.groups.list,function(a){return a.id===b.id}),e.data.groups.list[c]=a.data):void 0}),e.data.groups.form_group=h()},del_group:function(b){var c;return e.notify_proc(),c=a.rest,c.one("teacher/ugroups",b.id).remove().then(function(a){return d(a.msg),"success"===a.msg.status?e.data.groups.list=_.reject(e.data.groups.list,{id:b.id}):void 0})},load_groups:function(b){var c,d;return null==b&&(b=!1),d=a.rest.all("teacher/ugroups"),c=_.merge({pg:1},b?{t:_.now()}:{}),d.getList(c).then(function(a){return e.data.groups.list=a})},edit_group:function(a){var b;return b=_.clone(a,!0),b.klass=e.find_local(a.klass,"klasses"),b.extime=e.find_local(a.extime,"time_sec"),e.data.groups.form_group=b},find_local:function(a,b){var c,d;return c=e.data.groups[b],d=_.findIndex(c,function(b){return b.value===a}),c[d]},load:function(){return e.data.init?void 0:(e.data.init=!0,e.load_groups())},data:{init:!1,groups:{"new":!1,new_submitted:!1,edit:!1,edit_submitted:!1,pager:{page:1},list:[],form_group:h(),exdate_opt:{minDate:"'2014/11/10'",maxDate:"'2014/11/21'",open:!1,startingDay:1},klasses:c,time_sec:f}}}}])}.call(this),function(){"use strict";angular.module("brasFeApp").service("studentEnrollments",["$rootScope","$q","sessionServ","notify",function(a,b,c,d){var e,f,g,h,i,j;return f=function(a){return"男"===a?1:"女"===a?0:-1},g=function(a,b){return{id:null,name:a[0],gender:a[1],suid:a[2],seat:a[3],status:{name:b.n||"處理中",value:b.v||"handling"}}},j=function(a,b){return a.id=b.user.id,a.status=b.user.status,a.error=b.user.error},i=function(a){var b;return b=_.clone(a),b.gender=f(b.gender),b},e=function(a,b){var c,d,e,f,g;for(b=b||",",e=new RegExp("(\\"+b+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+b+"\\r\\n]*))","gi"),c=[[]],d=null;d=e.exec(a.replace(/\t/g,","));)f=d[1],f.length&&f!==b&&c.push([]),g=void 0,g=d[2]?d[2].replace(new RegExp('""',"g"),'"'):d[3],c[c.length-1].push(g);return c},h={read_csv:function(a){var c,d;return c=b.defer(),window.File&&window.FileReader&&window.FileList&&window.Blob?(d=new FileReader,void 0!==a&&null!==a?(d.onload=function(a){var b;b=_.map(e(a.target.result),g),c.resolve(b)},d.readAsText(a)):(c.resolve([]),growl.warning("沒有檔案."))):(c.resolve([]),growl.error("瀏覽器不支援此功能.")),c.promise},enroll_base:function(b,d,e){var f,g;return f=i(b),g=c.fest().one("teacher/ugroups",h.data.gid),g.post(e,{user:f}).then(function(c){return j(b,c),null!=d?a.$broadcast("enroll_next",d+1):void 0})},enroll:function(b,c){return"added"===b.status.value?void(null!=c&&a.$broadcast("enroll_next",c+1)):h.enroll_base(b,c,"enroll")},load:function(){return h.data.init?void 0:(h.data.init=!0,h.load_enrollments())},load_enrollments:function(){var a;return a=c.fest().one("teacher/ugroups",h.data.gid),a.getList("enrollments").then(function(a){return h.data.users=a})},delete_checked:function(){var a;if(0!==h.data.users.length)return a=c.fest().one("teacher/ugroups",h.data.gid),a.one("enrollments").post("",{ids:h.data.del_users}).then(function(a){return d.g(a.msg),h.data.users=_.filter(h.data.users,function(b){var c;return c=_.findIndex(a.keep,function(a){return b.id===a}),c>-1})})},set_gid:function(a){return h.data.gid=a,h.data.init=!1},new_enrollment:function(){var a,b;return b={n:"未處理",v:"new"},a=g(["new","","",""],b),h.data.users.splice(0,0,a)},save_edit:function(){return _.each(h.data.users,function(a){return"new"===a.status.value?h.enroll(a):a.dirty?h.enroll_base(a,null,"enroll"):void 0})},data:{gid:null,init:!1,users:[],del_users:[]}}}])}.call(this),function(){"use strict";angular.module("brasFeApp").service("dashUser",["$rootScope","sessionServ",function(a,b){var c;return c={users:{},user:{},init:!1,load:function(){return c.init?void 0:(c.init=!0,c.user=b.user)},load_users:function(){var d,e;return d=b.rest,e=b.user.role,d.all(""+e.name+"/users").get("").then(function(b){return c.users=b.data,a.$broadcast("users_loaded")})}}}])}.call(this),function(){"use strict";angular.module("brasFeApp").service("managerUsers",["sessionServ","notify",function(a,b){var c;return c={init:!1,data:{pager:{page:1,per_page:30},users:[],mod:""},load:function(){return c.init?void 0:c.init=!0},load_users:function(a){return a=a||c.data.mod,c.load_users_req(a)},load_users_req:function(b){var d,e;return e=a.user.role.name,d=a.fest().all(""+e+"/users"),d.one("list",b).get(c.data.pager).then(function(a){return c.data.users=a.users,c.data.pager.total=a.total,c.data.mod=b})},mark_teacher:function(d){var e,f;return f=a.user.role.name,e=a.fest().all(""+f+"/users"),e.one("approve_teacher").post("",{id:d.id}).then(function(a){return b.g(a.msg),"success"===a.msg.status?c.data.users=_.reject(c.data.users,function(a){return a.id===d.id}):void 0})}}}])}.call(this),function(){"use strict";angular.module("brasFeApp").service("userGroup",["$rootScope","sessionServ","notify",function(a,b,c){var d,e;return e=function(){return{moeid:"",suid:"",gcode:""}},d={init:!1,data:{groups:[],join:{form:e(),show:!0}},sclist:function(a){return b.sclist(a)},new_join:function(){return d.data.join.form=e()},join:function(){var a,e;return a=_.clone(d.data.join.form),e=b.fest().one("user/ugroups","join"),e.post("",{grp:a}).then(function(a){return c.g(a.msg)})}}}])}.call(this),function(){"use strict";angular.module("brasFeApp").service("menu",["$log","sessionServ","growl",function(a,b,c){var d,e;return d=function(a){var b,d;return b=c[a.status],d=a.msg,b(d.body,{title:d.title})},e={init:!1,data:{clicked:{},menu:{},raw:{},tube:{player:null,visible:!1,vars:{autoplay:0}}},reload:function(){return e.init=!1,e.load()},load:function(){return e.init?void 0:(e.init=!0,e.load_menu())},role:function(){return b.user.role.name},load_menu:function(){var a;return a=b.rest,a.all("dashboard/menu?t="+_.now()).get("").then(function(a){return e.data.menu=a.menu})},get_menu_list:function(a){var c;return c=b.fest(),c.all("dashboard/menu?edit="+a).get("").then(function(a){return e.data.raw=a.menu})},update_raw:function(a){var c,f,g;return c={role:a,menu:e.data.raw},f=b.fest(),g=b.user.role.name,f.all(""+g).one("menu").post("",c).then(function(b){return e.get_menu_list(a),d(b)})}}}])}.call(this),function(){"use strict";angular.module("brasFeApp").config(["$stateProvider",function(a){return a.state("root",{url:"/","abstract":!0,templateUrl:"app/landing/root.html",controller:"LandingCtrl"}).state("landing",{url:"",parent:"root",views:{main:{templateUrl:"app/landing/landing.html"}}})}]),angular.module("brasFeApp").controller("LandingCtrl",["$scope","$state","sessionServ","bulletin","menu",function(a,b,c,d,e){var f;return c.warm_up(),d.load_pub(),a.data={menu:e.data,user:c.user,msgc:d.data},f=function(a){return b.current.name==="session."+a},a.dim_bg=function(){return f("login")||f("register")||f("reset")},a.loggedin=function(){return c.is_user},a.logout=function(){return c.logout()},a.$on("$stateChangeStart",function(){}),a.menu_clicked=function(){return null!=e.data.clicked.name},a.toggle_menu_video=function(){return e.data.tube.visible=!e.data.tube.visible,null!=e.data.tube.player?e.data.tube.visible?e.data.tube.player.playVideo():e.data.tube.player.stopVideo():void 0}}])}.call(this),function(){"use strict";angular.module("brasFeApp").config(["$stateProvider",function(a){return a.state("session",{url:"",parent:"root",views:{main:{templateUrl:"app/landing/landing.html"}}}).state("session.login",{url:"login",views:{control:{templateUrl:"components/form/session/login.html",controller:"SessionCtrl"}}}).state("session.register",{url:"register",views:{control:{templateUrl:"components/form/session/register.html",controller:"SessionCtrl"}}}).state("session.reset",{url:"password/edit?reset_password_token",views:{control:{templateUrl:"components/form/session/pw_reset.html",controller:"SessionCtrl"}}}).state("session.auth",{url:"oauth/{provider}?code&state",views:{control:{template:"<h2></h2><h2>Loading...</h2>",controller:"SessionCtrl"}}}).state("session.gauth",{url:"gauth?key&login&role&role_id",views:{control:{template:"<h2></h2><h2>Loading...</h2>",controller:"SessionCtrl"}}})}]),angular.module("brasFeApp").controller("SessionCtrl",["$scope","$state","$stateParams","$timeout","$location","sessionServ",function(a,b,c,d,e,f){return a.form={submitted:!1},a.onTimeout=function(){return a.form.password="",a.form.password_confirmation="",a.timer=d(a.onTimeout,9e4)},a.timer=d(a.onTimeout,9e4),a.stop=function(){return d.cancel(a.timer)},a.$on("$stateChangeStart",function(){return a.stop(),a.form.submitted=!1}),a.$on("redirect",function(a,c){var d;return"dashboard"===c?(d=f.user.role?f.user.role.name:"user",b.go(c+"."+d)):void 0}),a.$on("httpError",function(){return a.form.submitted=!1}),a.$on("$stateChangeSuccess",function(a,b){return"session.auth"===b.name?f.auth(c):"session.gauth"===b.name?f.gauth(c):void 0}),a.$on("$viewContentLoaded",function(){var a;return a="reset_password_token","sessionServ.reset"!==b.current.name||a in c&&c[a]&&"true"!==c[a]?void 0:b.go("landing")}),a.$watch("school",function(b){return b&&"object"==typeof b&&"moeid"in b?a.form.moeid=b.moeid:void 0}),a.reset=function(){var b,d;return a.form.submitted=!0,d=_.clone(a.form),b=_.extend(d,c),f.reset_pw(b)},a.register=function(){return a.form.submitted=!0,f.register(a.form)},a.login=function(){return a.form.submitted=!0,f.login(a.form)},a.aquire_new_pw=function(){return f.request_link(a.form)},a.moeid_not_set=function(){return!("moeid"in a.form&&a.form.moeid)},a.get_school_list=function(a){return f.sclist(a).then(function(a){return a})},a.password_matched=function(a){return a.password===a.password_confirm},a.loginable=function(b){return!a.form.submitted&&b.$valid},a.resetable=function(b){return!a.form.submitted&&b.$valid&&!a.password_matched(b)},a.registerable=function(b){return!a.form.submitted&&b.$valid&&!a.moeid_not_set()},a.auth=function(b){var c;return a.form.submitted=!0,c="http://"+f.host,console.log(""+c+"/users/auth/"+b),window.location.href=""+c+"/users/auth/"+b}}]),angular.module("brasFeApp").service("sessionServ",["$rootScope","$cookieStore","$state","sestangular","growl",function(a,b,c,d,e){var f,g,h,i,j;return i=function(a){var b,c;return c=e[a.status],b=a.msg,c(b.body,{title:b.title})},g={login_alias:"",auth_token:"",roles:[],role:{name:"user",id:1}},h="bebras01.csie.ntnu.edu.tw:88",f=function(){},j={init:!1,is_user:!1,user:{login_alias:"",auth_token:""},redirect:"",host:h,rest:d.rest(g,{host:h}).all(""),fest:function(){var a;return a={host:h,cache:!1},d.rest(j.user,a).all("")},validate:function(){return j.is_user?j.rest.one("").get().then(function(){return i(data)}):void 0},warm_up:function(){var a;if(!j.init)return j.init=!0,a=b.get("tiny_beaver")||g,j.set_user(a)},update_session:function(a){var b;return b=d.rest(a,{host:h}),b.one("session").get("").then(function(a){return j._session_base(a)})},gauth:function(a){return j.update_session({login_alias:a.login,auth_token:a.key})},auth:function(a){var b;return b="users/auth/"+a.provider+"/callback",j.rest.all(b).get("",a).then(function(a){return j._session_base(a)})},logout:function(){return j.rest.all("session").remove().then(function(a){return i(a),b.put("tiny_beaver",g),j.set_user(g)})},sclist:function(a){return j.rest.all("group/publist/school").getList({query:a})},set_user:function(a){return j.user=a,j.rest=d.rest(a,{host:h}),j.is_user=j.user&&j.user.login_alias&&j.user.auth_token?!0:!1},request_link:function(b){return b&&"login_alias"in b&&b.login_alias?j.rest.all("password/forget").post(b).then(function(b){return i(b),b.status?a.$broadcast("redirect",b.redirect):void 0}):void i({status:"error",msg:{title:"錯誤",body:"請先輸入賬號"}})},register:function(a){return j.rest.one("user").post("",{user:a}).then(function(a){return j._session_base(a)})},login:function(a){return j.rest.one("session").post("",{user:a}).then(function(a){return j._session_base(a)})},reset_pw:function(a){return j.rest.one("password/reset").put(a).then(function(a){return j._session_base(a)})},_session_base:function(a){var b;return i(a),(b=j["_"+a.status])(a)},_success:function(c){return b.put("tiny_beaver",c.user),j.set_user(c.user),c.redirect?a.$broadcast("redirect",c.redirect):void 0},_error:function(){return j.set_user(g),a.$broadcast("sessionError")},isGuest:function(){return!j.user.login_alias&&!j.user.auth_token},switch_role:function(b){return e.warning("請稍後。。。",{title:"轉換中"}),j.fest().all("session/role").get("",{role_id:b}).then(function(b){return j._session_base(b),a.$broadcast("role_switched")})},base_state:function(){var a;return a=j.user.role,"dashboard."+a.name},is_valid_state:function(a){return a.includes(""+j.base_state()+".**")},auth_user:function(a,b){var c;return c=j.base_state(),0!==a.name.indexOf(c)?b.go(c):void 0},auth_state:function(a,b){var c;return c=j.base_state(),b.name.indexOf("dashboard")>=0&&0!==b.name.indexOf(c)?a.preventDefault():void 0}}}])}.call(this),function(){"use strict";angular.module("brasFeApp").config(["$stateProvider",function(a){return a.state("tasks",{url:"/tasks",templateUrl:"app/task/task.html",controller:"TaskCtrl"})}]),angular.module("brasFeApp").controller("TaskCtrl",["$scope","sessionServ","sestangular",function(a,b){var c;return b.warm_up(),c=b,a.$on("$viewContentLoaded",function(){var b;return b=c.rest.all("task"),b.all("list").getList().then(function(b){return a.task_list=b})}),a.$watch("task_token",function(b){var d;if(b)return d=c.rest.all("task"),d.one(b.qid).get().then(function(b){return a.cur_task=b})})}])}.call(this),function(){"use strict";angular.module("brasFeApp").controller("NavbarCtrl",["$scope","$location",function(a,b){return a.menu=[{title:"Home",link:"/"}],a.isCollapsed=!0,a.isActive=function(a){return a===b.path()}}])}.call(this),angular.module("brasFeApp").run(["$templateCache",function(a){"use strict";a.put("app/dashboard/view/admin/base.html",'<div class=base><a ui-sref=dashboard.admin ng-show=not_in_base()>Back</a></div><div ui-view=box class="admin view"><p>admin panel</p></div>'),a.put("app/dashboard/view/admin/menu.html",'<ul class="menu ops"><div class=tip>1.選擇欲編輯之菜單&nbsp;<select ng-model=data.edit_role name=roles ng-options="role.name as role.name for role in user.roles"></select></div><li><div ng-click=menu_add() href="" class=btn>Add</div></li><li><div ng-click=menu_save() href="" class=btn>Save</div></li><li><div ng-click=menu_cancel_edit() href="" class=btn>Cancel</div></li></ul><div class="half edit_form"><div class=tip>2.點選左方選項編輯</div><form name=menu_item><div class=field><label>名稱</label><input ng-model=data.menu.selected.name></div><div class=field><label>圖示 (參考<a href="http://fortawesome.github.io/Font-Awesome/icons/">命名</a>)</label><input ng-model=data.menu.selected.icon></div><div class=field><label>鏈結</label><input ng-model=data.menu.selected.link></div><div class=field><label>Youtube</label><input ng-model=data.menu.selected.tube></div><div class=field><label>功能描述</label><textarea ng-model=data.menu.selected.desc></textarea></div></form></div><script type=text/ng-template id=menu_item><i ng-click="menu_mark_as_remove(this)" class="fa fa-fw fa-times"></i><i ui-tree-handle="" ng-class="{dragging: this.is_dragging }" class="fa fa-fw fa-arrows"></i><i class="fa fa-fw fa-{{node.icon}}"></i><span>{{node.name}}</span><ol ui-tree-nodes="" ng-model="node.nodes"><li ng-repeat="node in node.nodes" ui-tree-node="" ng-include="\'menu_item\'"></li></ol></script><div ui-tree=data.menuTree class="half menu_tree"><ol id=tree-root ui-tree-nodes="" data-max-depth=5 ng-model=data.menu.serv.raw><li ng-repeat="node in data.menu.serv.raw" ng-click=show_menu_item(this) ng-class="{\'node-selected\': menu_item_selected(node), \'destroy\': node.destroy}" ng-include="\'menu_item\'" ui-tree-node=""></li></ol></div>'),a.put("app/dashboard/view/admin/tasks.html","<div class=cool>Tasks</div><div class=task></div>"),a.put("app/dashboard/view/admin/users.html","<div class=cool>user panel</div><div ng-grid=userGrid class=userGrid></div>"),a.put("app/dashboard/view/base.html",'<div class=db><div class=hide><dashboard></dashboard></div><div class=wrap><header id=header><div id=title><div class="beaver avatar"><img src=/assets/images/3419cf66.beaver128.png></div><h1><a ui-sref=landing><span>Bebras&nbsp;</span><span class=full>Contest</span></a></h1><h2><a ui-sref=landing><span>國際運算思維能力測驗</span></a></h2></div><ul id=nav><li class=state><h1>{{ data.menu.clicked.name }}<i ng-click=toggle_menu_video() ng-show=menu_clicked() class="fa fa-fw fa-youtube-play tube"></i><i ng-click=play_menu_video() ng-show=menu_clicked() class="fa fa-fw fa-question-circle info"></i></h1><h2>{{ data.menu.clicked.desc }}</h2></li><li class=user><div class=name><a href=#>{{ user.name || "新海貍" }}</a></div><ul class=switches><li><a href=# ng-click=logout() class=logout>登出</a></li><li ng-show=" user.roles.length &gt; 1" class=roles><select ng-model=data.role ng-options="role.name for role in user.roles"></select></li></ul></li><li class=avatar><img src=/assets/images/d58c6515.user_nil.png></li></ul></header><div class=drow><div ui-view=menu class=wg></div><div ui-view=panel class=pan><div class=data></div></div></div></div></div>'),a.put("app/dashboard/view/com/date.html",""),a.put("app/dashboard/view/com/school_list.html",""),a.put("app/dashboard/view/com/text_input.html",""),a.put("app/dashboard/view/header.html",'<header id=header><div id=title><div class="beaver avatar"><img src=/assets/images/3419cf66.beaver128.png></div><h1><a ui-sref=landing><span>Bebras&nbsp;</span><span class=full>Contest</span></a></h1><h2><a ui-sref=landing><span>國際運算思維能力測驗</span></a></h2></div><ul id=nav><li class=state><h1>{{ data.menu.clicked.name }}<i ng-click=toggle_menu_video() ng-show=menu_clicked() class="fa fa-fw fa-youtube-play tube"></i><i ng-click=play_menu_video() ng-show=menu_clicked() class="fa fa-fw fa-question-circle info"></i></h1><h2>{{ data.menu.clicked.desc }}</h2></li><li class=user><div class=name><a href=#>{{ user.name || "新海貍" }}</a></div><ul class=switches><li><a href=# ng-click=logout() class=logout>登出</a></li><li ng-show=" user.roles.length &gt; 1" class=roles><select ng-model=data.role ng-options="role.name for role in user.roles"></select></li></ul></li><li class=avatar><img src=/assets/images/d58c6515.user_nil.png></li></ul></header>'),a.put("app/dashboard/view/manager/base.html",'<div ui-view=box class="manager view"><p>manager panel</p></div>'),a.put("app/dashboard/view/manager/bulletin.html",'<ul class="ops bulletin"><li><div ng-click=new_msg() class=btn>新公告</div></li></ul><div class="scroll bulletin"><div ng-show=" msg_editor_visible() " class=msg_form><form name=msg_form novalidate><div class="field top"><label for=msg_start>開始於</label><span class=date><div class=mark><input id=msg_start date-disabled="msg_start_cal_disable(date, mode)" year-range=1 format-day-title="\'MM yyyy\'" format-month-title="\'MM yyyy\'" format-month=MMM datepicker-mode=day datepicker-popup=yyyy/MM/dd ng-model=data.msg.start_time datepicker-options=data.sdate_opt is-open=data.sdate_opt.open min-date=data.sdate_opt.minDate show-button-bar=false disabled ng-required=true><button type=button ng-click="open_calendar($event, \'sdate_opt\')" class="btn date"><i class="fa fa-fw fa-calendar"></i></button></div></span></div><div class="field top"><label for=msg_end>結束于</label><span class=date><div class=mark><input id=msg_end date-disabled="msg_end_cal_disable(date, mode)" year-range=1 format-day-title="\'MM yyyy\'" format-month-title="\'MM yyyy\'" format-month=MMM datepicker-mode=day datepicker-popup=yyyy/MM/dd ng-model=data.msg.end_time datepicker-options=data.edate_opt is-open=data.edate_opt.open min-date=data.edate_opt.minDate show-button-bar=false disabled ng-required=true><button type=button ng-click="open_calendar($event, \'edate_opt\')" class="btn date"><i class="fa fa-fw fa-calendar"></i></button></div></span></div><div class="field full"><label for=msg_title>標題</label><input min=2 max=64 ng-model=data.msg.title></div><div class="field text full"><label for=msg_title>內文</label><textarea row=10 ng-model=data.msg.body></textarea></div><div class=controls><button ng-click=add_msg() ng-show=" data.new " class=btn>新</button><button ng-click=update_msg() ng-show=" data.edit " class=btn>改</button><button ng-click=cancel_editor() class=btn>取消</button></div></form></div><ul class=msgs><li ng-repeat="msg in data.msgs"><div class=msg><div class=title><div ng-click=del_msg(msg) class="delete fa fa-fw fa-times"></div><span ng-click=edit_msg(msg)>{{ msg.title }}</span></div><div class=body>{{ msg.body }}</div></div></li></ul></div>'),a.put("app/dashboard/view/manager/msg_form.html",'<div ng-show=" msg_editor_visible() " class=msg_form><form name=msg_form novalidate><div class="field top"><label for=msg_start>開始於</label><span class=date><div class=mark><input id=msg_start date-disabled="msg_start_cal_disable(date, mode)" year-range=1 format-day-title="\'MM yyyy\'" format-month-title="\'MM yyyy\'" format-month=MMM datepicker-mode=day datepicker-popup=yyyy/MM/dd ng-model=data.msg.start_time datepicker-options=data.sdate_opt is-open=data.sdate_opt.open min-date=data.sdate_opt.minDate show-button-bar=false disabled ng-required=true><button type=button ng-click="open_calendar($event, \'sdate_opt\')" class="btn date"><i class="fa fa-fw fa-calendar"></i></button></div></span></div><div class="field top"><label for=msg_end>結束于</label><span class=date><div class=mark><input id=msg_end date-disabled="msg_end_cal_disable(date, mode)" year-range=1 format-day-title="\'MM yyyy\'" format-month-title="\'MM yyyy\'" format-month=MMM datepicker-mode=day datepicker-popup=yyyy/MM/dd ng-model=data.msg.end_time datepicker-options=data.edate_opt is-open=data.edate_opt.open min-date=data.edate_opt.minDate show-button-bar=false disabled ng-required=true><button type=button ng-click="open_calendar($event, \'edate_opt\')" class="btn date"><i class="fa fa-fw fa-calendar"></i></button></div></span></div><div class="field full"><label for=msg_title>標題</label><input min=2 max=64 ng-model=data.msg.title></div><div class="field text full"><label for=msg_title>內文</label><textarea row=10 ng-model=data.msg.body></textarea></div><div class=controls><button ng-click=add_msg() ng-show=" data.new " class=btn>新</button><button ng-click=update_msg() ng-show=" data.edit " class=btn>改</button><button ng-click=cancel_editor() class=btn>取消</button></div></form></div>'),a.put("app/dashboard/view/manager/users.html",'<div class=bar><ul class="users ops"><li><div ng-click="load_user(\'teacher_applicant\')" class=btn>新教師</div></li><li><div ng-click="load_user(\'teacher\')" class=btn>教師們</div></li><li><div ng-click="load_user(\'student\')" class=btn>學生們</div></li></ul><div class="users pager"><pagination boundary-links=true max_page=data.pager.max_page total-items=data.pager.total ng-model=data.pager.page items-per-page=data.pager.per_page max-size=5 previous-text=‹ next-text=› first-text=« last-text=»></pagination><div class=per><select ng-model=data.pager.per_page><option>50</option><option>30</option><option>10</option></select></div></div></div><div class="users scroll"><ul class=list><div ng-show="data.users.length == 0" class=nodata>沒有資料</div><li ng-repeat="u in data.users"><div ng-class=user_style(u) class=user><div ng-show=is_teacher_applicant(u) ng-click=mark_teacher(u) class=check><i class="fa fa-fw fa-check-circle"></i></div><div class=field><div class=school>{{ u.school }}</div><div class=name>{{ u.name }}</div><div class=phone>{{u.phone}}</div></div><div class=controls><div class=groups></div></div></div></li></ul><div class=detail>more</div></div>'),a.put("app/dashboard/view/menu.html",'<ul class=menu><li ng-repeat="item in data.menu" ng-class="{clicked: item == clicked}"><a ng-click=menu_click(item) href=""><span title={{item.desc}}>{{ item.name }}</span><i class="fa fa-fw fa-{{item.icon}}"></i></a></li></ul>'),a.put("app/dashboard/view/student/base.html","<h1>studnet panel {{message}}</h1>"),a.put("app/dashboard/view/teacher/base.html",'<!-- teacher panel--><div ui-view=box class="teacher view"></div>'),a.put("app/dashboard/view/teacher/form/new_group.html",'<div ng-show=" data.groups.new || data.groups.edit " class=new_group><form novalidate name=new_group><div class=field><label for=group_grade>年級</label><input id=group_grade ng-model=data.groups.form_group.grade ng-class="{\'error\': form_invalid(new_group.group_grade)}" ng-required=true type=number name=group_grade min=1 max=12><div class=error><span ng-show=new_group.group_grade.$error.required>不可空白</span><span ng-show=new_group.group_grade.$error.min>值需大於1</span><span ng-show=new_group.group_grade.$error.max>值需小於12</span></div></div><div class=field><label for=group_klass>班級類別</label><select id=group_klass ng-model=data.groups.form_group.klass ng-options="k as k.name for k in data.groups.klasses" ng-required=true></select></div><div class=field><label for=group_name>班級名稱</label><input id=group_name ng-model=data.groups.form_group.name name=group_name ng-class="{\'error\': form_invalid(new_group.group_name)}" ng-required=true ng-maxlength=10><div class=error><span ng-show="new_group.group_name.$error.required &amp;&amp; !new_group.group_name.$pristine">不可空白</span><span ng-show="new_group.group_name.$error.maxlength &amp;&amp; !new_group.group_name.$pristine">不可超過10個字</span></div></div><div class=field><label for=group_extime>其他註記</label><input id=group_note ng-model=data.groups.form_group.note ng-maxlength=255></div><div class="field desc">預計測驗時程</div><div class=field><label for=group_exdate>日期</label><span class=date><div class=mark><input id=group_exdate date-disabled="group_exdate_cal_disable(date, mode)" year-range=1 format-day-title="\'MM yyyy\'" format-month-title="\'MM yyyy\'" format-month=MMM datepicker-mode=day datepicker-popup=yyyy/MM/dd ng-model=data.groups.form_group.exdate datepicker-options=data.groups.exdate_opt is-open=data.groups.exdate_opt.open min-date=data.groups.exdate_opt.minDate show-button-bar=false disabled ng-required=true><button type=button ng-click=open_calendar($event) class="btn date"><i class="fa fa-fw fa-calendar"></i></button></div></span></div><div class=field><label for=group_extime>時段</label><select id=group_klass ng-model=data.groups.form_group.extime ng-options="k as k.name for k in data.groups.time_sec" ng-required=true></select></div><div class=controls><button ng-click=group_add(new_group) ng-show=" data.groups.new " ng-disabled=cant_add_group(new_group) class=btn>新增</button><button ng-click=group_update(new_group) ng-show=" data.groups.edit " ng-disabled=cant_update_group(new_group) class=btn>更新</button><button ng-click=group_new_cancel() class=btn>取消</button></div></form></div>'),a.put("app/dashboard/view/teacher/groups.html",'<div ui-view=details class=details><div class=ops><ul><li><div ng-click=group_new() class=btn>1.新增班級</div></li><li><div class=tip>請注意，學生經首頁註冊並加入班級後，始完成報名</div></li></ul></div><div ng-show=" data.groups.new || data.groups.edit " class=new_group><form novalidate name=new_group><div class=field><label for=group_grade>年級</label><input id=group_grade ng-model=data.groups.form_group.grade ng-class="{\'error\': form_invalid(new_group.group_grade)}" ng-required=true type=number name=group_grade min=1 max=12><div class=error><span ng-show=new_group.group_grade.$error.required>不可空白</span><span ng-show=new_group.group_grade.$error.min>值需大於1</span><span ng-show=new_group.group_grade.$error.max>值需小於12</span></div></div><div class=field><label for=group_klass>班級類別</label><select id=group_klass ng-model=data.groups.form_group.klass ng-options="k as k.name for k in data.groups.klasses" ng-required=true></select></div><div class=field><label for=group_name>班級名稱</label><input id=group_name ng-model=data.groups.form_group.name name=group_name ng-class="{\'error\': form_invalid(new_group.group_name)}" ng-required=true ng-maxlength=10><div class=error><span ng-show="new_group.group_name.$error.required &amp;&amp; !new_group.group_name.$pristine">不可空白</span><span ng-show="new_group.group_name.$error.maxlength &amp;&amp; !new_group.group_name.$pristine">不可超過10個字</span></div></div><div class=field><label for=group_extime>其他註記</label><input id=group_note ng-model=data.groups.form_group.note ng-maxlength=255></div><div class="field desc">預計測驗時程</div><div class=field><label for=group_exdate>日期</label><span class=date><div class=mark><input id=group_exdate date-disabled="group_exdate_cal_disable(date, mode)" year-range=1 format-day-title="\'MM yyyy\'" format-month-title="\'MM yyyy\'" format-month=MMM datepicker-mode=day datepicker-popup=yyyy/MM/dd ng-model=data.groups.form_group.exdate datepicker-options=data.groups.exdate_opt is-open=data.groups.exdate_opt.open min-date=data.groups.exdate_opt.minDate show-button-bar=false disabled ng-required=true><button type=button ng-click=open_calendar($event) class="btn date"><i class="fa fa-fw fa-calendar"></i></button></div></span></div><div class=field><label for=group_extime>時段</label><select id=group_klass ng-model=data.groups.form_group.extime ng-options="k as k.name for k in data.groups.time_sec" ng-required=true></select></div><div class=controls><button ng-click=group_add(new_group) ng-show=" data.groups.new " ng-disabled=cant_add_group(new_group) class=btn>新增</button><button ng-click=group_update(new_group) ng-show=" data.groups.edit " ng-disabled=cant_update_group(new_group) class=btn>更新</button><button ng-click=group_new_cancel() class=btn>取消</button></div></form></div><ul id=groups><li ng-repeat="gp in data.groups.list"><div class=group><div class=btns><div ui-sref="dashboard.teacher.groups.enrollments({id: gp.id})" class="upload btn"><i class="fa fa-fw fa-users"></i><span>2.學生名單</span></div></div><div class=info><div class=grade>{{ gp.grade }} 年級</div><div class=name>{{ gp.name }} 班 ({{ klass_str(gp.klass) }})</div><div class=gcode>班級代碼: {{ gp.gcode }}</div><div class=exdate>預計施測時間: {{ gp.exdate }} {{ extime_str(gp.extime) }}</div></div><div class=controls><div ng-click=del_group(gp) class="fa fa-fw fa-times-circle delete"></div><div ng-click=edit_group(gp) class="fa fa-fw fa-pencil edit"></div></div></div></li></ul></div>'),a.put("app/dashboard/view/teacher/groups/enrollments.html",'<ul flow-init="{singleFile: true}" flow-file-added="file_added($file, $event)" class="ops flow"><li><div ng-click=new_enrollment() class=btn>單筆新增</div></li><li><div ng-click=save_edited() class=btn>儲存編輯</div></li><li><div flow-btn="" flow-attrs="{accept:\'.csv,application/csv,text/csv\'}" class=btn>匯入學生資料</div></li><li><div ng-repeat="file in $flow.files" class=files><div class=status><div class=name>{{file.name}}</div><div class=msg>{{file.msg}}</div></div></div></li><li><div class=tip>資料為*.csv格式（無表頭)，請參考<a href=http://bebras01.csie.ntnu.edu.tw:88/system/st_template.csv class=template>此範本</a>填入資料上傳</div></li></ul><div class=students><table><thead><tr><th>姓名</th><th>性別</th><th>學號</th><th>座號</th><th>處理狀態</th><th ng-show="data.users.length &gt; 0"><button ng-click=delete_checked() class=btn>刪除</button><input type=checkbox ng-model=check_all></th></tr></thead><tbody><tr ng-show=" data.users.length == 0 "><td colspan=5>沒有資料</td></tr><tr ng-repeat=" sv in data.users "><td ng-class="{error: sv.error.name}"><a href="" buttons=no editable-text=sv.name onaftersave=make_dirty(sv)>{{ sv.name || "no name" }}</a></td><td ng-class="{error: sv.error.gender}"><a href="" buttons=no editable-text=sv.gender onaftersave=make_dirty(sv)>{{ sv.gender || "no name" }}</a></td><td ng-class="{error: sv.error.suid}"><a href="" buttons=no editable-text=sv.suid onaftersave=make_dirty(sv)>{{ sv.suid || "no name" }}</a></td><td ng-class="{error: sv.error.seat}"><a href="" buttons=no editable-text=sv.seat onaftersave=make_dirty(sv)>{{ sv.seat || "no name" }}</a></td><td ng-class="{error: sv.error.status.name}"><span ng-class=sv.status.value class=status>{{ sv.status.name }}</span></td><td><input type=checkbox ng-hide=" sv.status.value != \'added\' " checklist-model=data.del_users checklist-value=sv.id></td></tr></tbody></table></div>'),a.put("app/dashboard/view/teacher/groups/group_list.html",'<ul id=groups><li ng-repeat="gp in data.groups.list"><div class=group><div class=btns><div ui-sref="dashboard.teacher.groups.enrollments({id: gp.id})" class="upload btn"><i class="fa fa-fw fa-users"></i><span>2.學生名單</span></div></div><div class=info><div class=grade>{{ gp.grade }} 年級</div><div class=name>{{ gp.name }} 班 ({{ klass_str(gp.klass) }})</div><div class=gcode>班級代碼: {{ gp.gcode }}</div><div class=exdate>預計施測時間: {{ gp.exdate }} {{ extime_str(gp.extime) }}</div></div><div class=controls><div ng-click=del_group(gp) class="fa fa-fw fa-times-circle delete"></div><div ng-click=edit_group(gp) class="fa fa-fw fa-pencil edit"></div></div></div></li></ul>'),a.put("app/dashboard/view/user/base.html",'<div ui-view=box class="user view"></div>'),a.put("app/dashboard/view/user/groups.html",'<ul class=ops><li><div ng-click=join_grp(join_group) class=btn>加入班級</div></li></ul><form ng-show=" join_form_visible() " name=join_group novalidate class=join_group><div class=field><label for=school>學校<i ng-show=loadingSclist class="fa fa-fw fa-spin fa-compass loading"></i></label><input id=school name=moeid typeahead="sc as sc.name for sc in get_school_list($viewValue)" typeahead-persistent=0 typeahead-loading=loadingSclist typeahead-on-select="set_moeid($item, $model, $label)" typeahead-wait-ms=10 placeholder=選擇學校 ng-required=true ng-class="{error: field_not_set(\'moeid\', join_group)}" ng-model=school><p ng-show="field_not_set(\'moeid\', join_group)" class=error><span>必填欄位(請從清單中選擇學校)</span></p></div><div class=field><label for=suid>學號</label><input id=suid name=suid placeholder=請輸入學號 required ng-model=data.join.form.suid ng-class="{error: field_not_set(\'suid\', join_group)}"><p ng-show="field_not_set(\'suid\', join_group)" class=error><span>必填欄位</span></p></div><div class=field><label for=gcode>班級代碼</label><input id=suid name=gcode placeholder=請輸入班級代碼 required ng-model=data.join.form.gcode ng-class="{error: field_not_set(\'gcode\', join_group)}"><p ng-show="field_not_set(\'gcode\', join_group)" class=error><span>必填欄位</span></p></div><div class=btns><button sabled=join_group.$invalid ng-click=join(join_group) class=btn>加入</button><button ng-click=cancel(join_group) class=btn>取消</button></div></form><ul class=groups><li><span>grp</span></li><li><span>grp</span></li><li><span>grp</span></li><li><span>grp</span></li><li><span>grp</span></li><li><span>grp</span></li><li><span>grp</span></li><li><span>grp</span></li><li><span>grp</span></li><li><span>grp</span></li><li><span>grp</span></li><li><span>grp</span></li></ul>'),a.put("app/landing/landing.html",'<div id=ltop class=landing><div class=header><div class=power><div ng-show="" class=hide>Powered By National Taiwan Normal University Department of Computer Science and Information Engineering</div><h1>Bebras</h1><h2><span>國</span><span>際</span><span>運</span><span>算</span><span>思</span><span>維</span><span>能</span><span>力</span><span>測</span><span>驗</span></h2></div><div ui-view=control ng-class="{dim: dim_bg()}" class=control><ul id=nav><li du-scrollspy=ltop class=head><a du-smooth-scroll=du-smooth-scroll duration=1000 href=#ltop><img src=/assets/images/3419cf66.beaver128.png></a></li><li du-scrollspy=intro><a du-smooth-scroll=du-smooth-scroll duration=1000 href=#intro>測驗介紹</a></li><li du-scrollspy=subject><a du-smooth-scroll=du-smooth-scroll duration=1000 href=#subject>測驗目標</a></li><li du-scrollspy=target><a du-smooth-scroll=du-smooth-scroll duration=1000 href=#target>測驗對象</a></li><li du-scrollspy=contest><a du-smooth-scroll=du-smooth-scroll duration=1000 href=#contest>測驗方式</a></li><li><a ng-show=loggedin() ui-sref=dashboard.user>測驗平台</a></li><li><a ng-show=!loggedin() ui-sref=session.login>登入<i class="fa fa-flash"></i></a><a ng-show=loggedin() ng-click=logout() href=#>登出<i class="fa fa-coffee"></i></a></li></ul></div><ul class=msgs><li ng-repeat="msg in data.msgc.msgs"><div class=title>{{msg.title}}</div><p>{{ msg.body }}</p></li></ul></div><div id=body ng-class="{dim: dim_bg()}" class=body><div id=intro class=intro><ul class=articles><li id=about class=article><article><h2>關於Bebras</h2><p>Bebras測驗是一個針對8至18歲（三年級至十二年級）學生的國際資訊潛能測驗，每年於11月中的國際Bebras週（World-Wide Bebras Week）舉行。此測驗的目的旨在激起學生對於資訊學科之興趣，同時了解學生是否俱備學習資訊科學之性向。本測驗利用淺顯易懂的方式呈現題目（tasks），各題皆以情境式的任務呈現，讓學習者利用自己既有的知識進行解題。 Bebras測驗於2004年首次舉行；至2012年止，共有21國的學生參與此測驗，總計超過500,000名學生。臺灣於2012年始加入Bebras測驗。首年加入，參與學生數便為亞洲之冠，且廣受師生好評。 每年年中舉辦的Bebras 研討會，廣邀世界各地的資訊科學學者，研議新題目，並分享該國實施Bebras的成果。研討會結束後，便將編修完成的題目納入Bebras題庫中國際Bebras委員會期望透過此測驗的推廣，增進學校資訊學科之教授及學習品質。</p></article></li><li id=subject class=article><article><h2>測驗目標</h2><p>激發學生對資訊科學之學習興趣 Bebras測驗的目的除了瞭解學生是否俱備學習資訊科學之性向，更希望對學生介紹資訊科學或資訊教育的基本概念，激發他們的學習興趣。利用情境式的題型，讓學生瞭解生活中隨處可見資訊科學概念之運用；而解謎推理的題目述敘方式，更可以提升學生思考動機，並增進學生深層思考的能力。 提升學生利用資訊方法解決問題之能力 Bebras測驗題目包含家庭生活、團體合作、工作情境等。測驗內容多樣化，希望透過題目讓學生了解資訊科學概念在生活中隨處可見，而生活中的許多問題都能透過資訊科學之概念解決。 降低學生對資訊科學之恐懼 Bebras測驗透過巧思，將題目以生活化的方式呈現，讓抽象的資訊科學題目具體化，以日常生活中會碰到的問題呈現，使未曾受過資訊科學教育的學生亦能利用邏輯、推理、運算等能力解題。另一方面，Bebras題目呈現有趣且生動，不論學生是否曾受過資訊科學的訓練，都可以降低其對資訊科學的懼怕感。</p></article></li><li id=target class=article><article><h2>測驗對象</h2><p>Bebras測驗每年於11月施測一次，受測學生並無特定資格限制 ，凡是三年級至十二年級之在學學生（年紀約8至18歲），皆能 參與。受測學生依年齡分為五組，分別為：Little Beaver、Benjamin、Cadet、Junior及Senior組。每組考題又分難、中、易三種等級。</p></article></li><li id=contest class=article><article><h2>測驗方式</h2><p>測驗以班級為參加單位，利用測驗當週中的一堂課，在學校內即可完成施測。測驗中，學生必須解一連串的題目（task），每一題約耗時三分鐘，每次測驗15題，故測驗時間約45分鐘。 測驗規定學生只能用電腦作答，學生不可利用紙筆解題；因此測驗時須在電腦教室完成，且每一位學生皆備有一台作答電腦。目前全球共有六個不同進行Bebras測驗的系統；臺灣目前使用線上測驗方式，不需額外安裝任何軟體，只要有網路連線即可透過瀏覽器進行測驗。 本測驗的題目設定讓學生可於三分鐘左右完成，題庫中之題型包含單一選擇題、開放作答題、或互動題。互動題即測驗題目中包含的物件可供學生以電腦操作，以利思考；待學生找出答案後，再選擇正確的選項。 每一個年齡組的題目皆包含難、中及易三個難度。每一難度的給分不同，且題目答錯皆會倒扣。因有倒扣計分，避免負分的情形，每次測驗的起始分數為所有倒扣分數的總和，例如：臺灣今年正式測驗的起始分數為60分，滿分為300分，最低分為0分。每次測驗將遴選適合該年齡組的題目，難、中、易各佔總測驗的三分之一。</p></article></li></ul></div><footer class=footer>2014 &copy; Bebras Taiwan</footer></div></div>'),a.put("app/landing/root.html","<div ng-show=data.menu.tube.visible ng-click=toggle_menu_video() class=tube><div id=tubebed class=embed><youtube-video id=tube player=data.menu.tube.player video-id=\"data.menu.clicked.tube || 'eeJO3HVDSD4'\" player-vars=data.menu.tube.vars></youtube-video></div></div><div ui-view=main class=root></div>"),a.put("app/landing/view/intro.html","<div id=intro class=intro><ul class=articles><li id=about class=article><article><h2>關於Bebras</h2><p>Bebras測驗是一個針對8至18歲（三年級至十二年級）學生的國際資訊潛能測驗，每年於11月中的國際Bebras週（World-Wide Bebras Week）舉行。此測驗的目的旨在激起學生對於資訊學科之興趣，同時了解學生是否俱備學習資訊科學之性向。本測驗利用淺顯易懂的方式呈現題目（tasks），各題皆以情境式的任務呈現，讓學習者利用自己既有的知識進行解題。 Bebras測驗於2004年首次舉行；至2012年止，共有21國的學生參與此測驗，總計超過500,000名學生。臺灣於2012年始加入Bebras測驗。首年加入，參與學生數便為亞洲之冠，且廣受師生好評。 每年年中舉辦的Bebras 研討會，廣邀世界各地的資訊科學學者，研議新題目，並分享該國實施Bebras的成果。研討會結束後，便將編修完成的題目納入Bebras題庫中國際Bebras委員會期望透過此測驗的推廣，增進學校資訊學科之教授及學習品質。</p></article></li><li id=subject class=article><article><h2>測驗目標</h2><p>激發學生對資訊科學之學習興趣 Bebras測驗的目的除了瞭解學生是否俱備學習資訊科學之性向，更希望對學生介紹資訊科學或資訊教育的基本概念，激發他們的學習興趣。利用情境式的題型，讓學生瞭解生活中隨處可見資訊科學概念之運用；而解謎推理的題目述敘方式，更可以提升學生思考動機，並增進學生深層思考的能力。 提升學生利用資訊方法解決問題之能力 Bebras測驗題目包含家庭生活、團體合作、工作情境等。測驗內容多樣化，希望透過題目讓學生了解資訊科學概念在生活中隨處可見，而生活中的許多問題都能透過資訊科學之概念解決。 降低學生對資訊科學之恐懼 Bebras測驗透過巧思，將題目以生活化的方式呈現，讓抽象的資訊科學題目具體化，以日常生活中會碰到的問題呈現，使未曾受過資訊科學教育的學生亦能利用邏輯、推理、運算等能力解題。另一方面，Bebras題目呈現有趣且生動，不論學生是否曾受過資訊科學的訓練，都可以降低其對資訊科學的懼怕感。</p></article></li><li id=target class=article><article><h2>測驗對象</h2><p>Bebras測驗每年於11月施測一次，受測學生並無特定資格限制 ，凡是三年級至十二年級之在學學生（年紀約8至18歲），皆能 參與。受測學生依年齡分為五組，分別為：Little Beaver、Benjamin、Cadet、Junior及Senior組。每組考題又分難、中、易三種等級。</p></article></li><li id=contest class=article><article><h2>測驗方式</h2><p>測驗以班級為參加單位，利用測驗當週中的一堂課，在學校內即可完成施測。測驗中，學生必須解一連串的題目（task），每一題約耗時三分鐘，每次測驗15題，故測驗時間約45分鐘。 測驗規定學生只能用電腦作答，學生不可利用紙筆解題；因此測驗時須在電腦教室完成，且每一位學生皆備有一台作答電腦。目前全球共有六個不同進行Bebras測驗的系統；臺灣目前使用線上測驗方式，不需額外安裝任何軟體，只要有網路連線即可透過瀏覽器進行測驗。 本測驗的題目設定讓學生可於三分鐘左右完成，題庫中之題型包含單一選擇題、開放作答題、或互動題。互動題即測驗題目中包含的物件可供學生以電腦操作，以利思考；待學生找出答案後，再選擇正確的選項。 每一個年齡組的題目皆包含難、中及易三個難度。每一難度的給分不同，且題目答錯皆會倒扣。因有倒扣計分，避免負分的情形，每次測驗的起始分數為所有倒扣分數的總和，例如：臺灣今年正式測驗的起始分數為60分，滿分為300分，最低分為0分。每次測驗將遴選適合該年齡組的題目，難、中、易各佔總測驗的三分之一。</p></article></li></ul></div>"),a.put("app/landing/view/nav.html",'<ul id=nav><li du-scrollspy=ltop class=head><a du-smooth-scroll=du-smooth-scroll duration=1000 href=#ltop><img src=/assets/images/3419cf66.beaver128.png></a></li><li du-scrollspy=intro><a du-smooth-scroll=du-smooth-scroll duration=1000 href=#intro>測驗介紹</a></li><li du-scrollspy=subject><a du-smooth-scroll=du-smooth-scroll duration=1000 href=#subject>測驗目標</a></li><li du-scrollspy=target><a du-smooth-scroll=du-smooth-scroll duration=1000 href=#target>測驗對象</a></li><li du-scrollspy=contest><a du-smooth-scroll=du-smooth-scroll duration=1000 href=#contest>測驗方式</a></li><li><a ng-show=loggedin() ui-sref=dashboard.user>測驗平台</a></li><li><a ng-show=!loggedin() ui-sref=session.login>登入<i class="fa fa-flash"></i></a><a ng-show=loggedin() ng-click=logout() href=#>登出<i class="fa fa-coffee"></i></a></li></ul>'),a.put("app/task/task.html",'<div class=task><div class=heading><div class=header><select ng-model=task_token ng-options="task.name for task in task_list"><option value="">-- 選擇題目 --</option></select></div><div class=title>2014<a ui-sref=landing>國際Bebras測驗</a></div></div><div class=view><div class=contents><div class=date>題目年份：{{ cur_task.year }}</div><div class=body>題文：<span ng-bind-html=cur_task.body></span></div><div class=quest>問題：<span ng-bind-html=cur_task.quest></span></div></div></div></div>'),a.put("components/form/session/login.html",'<form id=login name=loginform novalidate><!--+school_ta(fn, false)--><label for=login_alias>賬號</label><input id=login_alias name=login_alias placeholder=Email ng-required=true ng-model=form.login_alias ng-class="{error: loginform.login_alias.$invalid &amp;&amp; !loginform.login_alias.$pristine}" ng-minlength=5 ng-maxlength=32><p ng-show="loginform.login_alias.$invalid &amp;&amp; !loginform.login_alias.$pristine" class=error>賬號格式錯誤</p><label for=password>密碼</label><input type=password placeholder=# name=password ng-required=true ng-model=form.password ng-class="{error: loginform.password.$invalid &amp;&amp; !loginform.password.$pristine}" ng-minlength=8 ng-maxlength=32 class=password><p class=error><span ng-show="loginform.password.$invalid &amp;&amp; !loginform.password.$pristine">密碼至少8個字</span></p><button type=submit ng-disabled=!loginable(loginform) ng-click=login(loginform) class=btn>登入</button><ul class=login><li><button ng-click="auth(\'facebook\')" ng-disabled=form.submitted class="btn facebook">Facebook</button></li><li><button ng-click="auth(\'google\')" ng-disabled=form.submitted class="btn gplus">Google</button></li></ul><ul><li><a ng-click=aquire_new_pw()>重設密碼</a></li><li><a ui-sref=session.register>註冊</a></li><li><a ui-sref=landing>返回</a></li></ul></form>'),a.put("components/form/session/mixin/email.html",""),a.put("components/form/session/mixin/login_alias.html",""),a.put("components/form/session/mixin/name.html",""),a.put("components/form/session/mixin/password.html",""),a.put("components/form/session/mixin/phone.html",""),a.put("components/form/session/mixin/school_typeahead.html",""),a.put("components/form/session/pw_reset.html",'<form id=reset name=resetform><label for=password>密碼</label><input type=password placeholder=# name=password ng-required=true ng-model=form.password ng-class="{error: resetform.password.$invalid &amp;&amp; !resetform.password.$pristine}" ng-minlength=8 ng-maxlength=32 class=password><p class=error><span ng-show="resetform.password.$invalid &amp;&amp; !resetform.password.$pristine">密碼至少8個字</span></p><label for=password_confirmation>確認密碼</label><input type=password placeholder=# name=password_confirmation ng-required=true ng-model=form.password_confirmation ng-class="{error: resetform.password_confirmation.$invalid &amp;&amp; !resetform.password_confirmation.$pristine}" ng-minlength=8 ng-maxlength=32 class=password><p class=error><span ng-show="resetform.password_confirmation.$invalid &amp;&amp; !resetform.password_confirmation.$pristine">密碼至少8個字</span><span ng-show="(form.password != form.password_confirmation) &amp;&amp; !resetform.password_confirmation.$pristine">&nbsp;確認密碼需與密碼相同</span></p><button type=submit ng-disabled=!resetable(resetform) ng-click=reset() class=btn>更新密碼</button><ul><li><a ui-sref=landing>返回</a></li><li><a ui-sref=landing.register>註冊</a></li></ul></form>'),a.put("components/form/session/register.html",'<form id=reg name=regform novalidate><label for=school>學校<i ng-show=loadingSclist class="fa fa-spin fa-dot-circle-o"></i></label><input id=school name=moeid typeahead="sc as sc.name for sc in get_school_list($viewValue)" typeahead-persistent=0 typeahead-loading=loadingSclist typeahead-on-select="set_moeid($item, $model, $label)" typeahead-wait-ms=10 placeholder=選擇學校 ng-required=ng-required ng-class="{error: moeid_not_set() &amp;&amp; !regform.moeid.$pristine}" ng-model=school><p ng-show="moeid_not_set() &amp;&amp; !regform.moeid.$pristine" class=error><span>必填欄位(請從清單中選擇學校)</span></p><label for=email>電郵</label><input id=email type=email name=email placeholder=@ ng-required=true ng-model=form.email ng-class="{error: regform.email.$invalid &amp;&amp; !regform.email.$pristine}" ng-minlength=8 ng-maxlength=32><p ng-show="regform.email.$invalid &amp;&amp; !regform.email.$pristine" class=error>Email 格式錯誤</p><div class=half><label for=name>名字(本測驗需以真實姓名報名)</label><input id=name name=uname placeholder=OOO ng-required=true ng-model=form.name ng-class="{error: regform.uname.$invalid &amp;&amp; !regform.uname.$pristine}" ng-minlength=2 ng-maxlength=8><p ng-show="regform.uname.$invalid &amp;&amp; !regform.uname.$pristine" class=error><span>必填欄位</span><span ng-show=regform.uname.$error.minlength>(太短)</span><span ng-show=regform.uname.$error.maxlength>(太長)</span></p></div><div class=half><label for=phone>電話</label><input id=phone type=phone placeholder=# name=phone ng-model=form.phone ng-pattern="/^[0-9]+$/" ng-class="{error: regform.phone.$invalid &amp;&amp; !regform.phone.$pristine}" ng-minlength=5 ng-maxlength=20><p ng-show="regform.phone.$invalid &amp;&amp; !regform.phone.$pristine" class=error><span>電話格式錯誤</span><span ng-show=regform.phone.$error.minlength>(太短)</span><span ng-show=regform.phone.$error.maxlength>(太長)</span></p></div><input id=role type=checkbox ng-model=form.as_teacher><label for=role>註冊為教師</label><button type=submit ng-disabled=!registerable(regform) ng-click=register(regform) class=btn>註冊</button><ul><li><a ui-sref=session.login>登入</a></li><li><a ui-sref=landing>返回</a></li></ul></form>'),a.put("components/navbar/navbar.html",'<div ng-controller=NavbarCtrl class="navbar navbar-default navbar-static-top"><div class=container><div class=navbar-header><button type=button ng-click="isCollapsed = !isCollapsed" class=navbar-toggle><span class=sr-only>Toggle navigation</span><span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button><a href="/" class=navbar-brand>bras-fe</a></div><div id=navbar-main collapse=isCollapsed class="navbar-collapse collapse"><ul class="nav navbar-nav"><li ng-repeat="item in menu" ng-class="{active: isActive(item.link)}"><a ng-href={{item.link}}>{{item.title}}</a></li></ul></div></div></div>')
}]);