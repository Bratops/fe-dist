(function(){"use strict";angular.module("brasFeApp",["classy","ngCookies","ngResource","ngAnimate","ngSanitize","LocalStorageModule","ui.event","ui.router","ui.bootstrap","ui.tree","restangular","duScroll","timer","xeditable","youtube-embed","checklist-model","ngTagsInput","flow","angular-growl","angular-loading-bar","ngGrid"]).constant("Config",{host:"brasbe.dev"}).config(["tagsInputConfigProvider",function(a){return a.setDefaults("tagsInput",{placeholder:"新增標記",addOnEnter:!0}).setDefaults("autoComplete",{maxResultsToShow:10,debounceDelay:1e3}).setActiveInterpolation("tagsInput",{placeholder:!0,addOnEnter:!0,removeTagSymbol:!0}).setTextAutosizeThreshold(40)}]).config(["flowFactoryProvider",function(a){return a.defaults={target:"",permanentErrors:[404,500,501]},a.on("catchAll",function(){return""})}]).config(["localStorageServiceProvider",function(a){return a.setPrefix("user")}]).config(["cfpLoadingBarProvider",function(a){return a.includeSpinner=!1,a.includeBar=!0,a.latencyThreshold=1e3}]).config(["growlProvider",function(a){return a.globalTimeToLive(1e4),a.onlyUniqueMessages(!1),a.globalReversedOrder(!0),a.globalDisableCountDown(!0)}]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(a,b,c){return b.otherwise("/"),c.html5Mode(!0)}]).config(["$httpProvider",function(a){return a.interceptors.push("errorHandler")}])}).call(this),function(){"use strict";angular.module("brasFeApp").controller("BulletinCtrl",["$scope","bulletin",function(){}]),angular.module("brasFeApp").service("bulletin",["sessionServ","notify",function(a,b){var c,d,e,f;return d=function(a,b){var c;return c=a||new Date,c.setDate(c.getDate()+b),c},f=function(){return{start_time:new Date,end_time:d(new Date,1),title:"",body:""}},e=function(){return{minDate:new Date,open:!1,startingDay:1}},c={init:!1,ensure_end:function(a){return a>c.data.msg.end_time?c.data.msg.end_time=d(a,1):void 0},cancel_edit:function(){return c.data.msg=f()},add_msg:function(){var d,e;return d=_.clone(c.data.msg),e=a.rest,e.one("manager","msgs").post("",{msg:d}).then(function(a){return b.g(a.msg),c.data.msgs.push(a.data),c.data.msg=f()})},update_msg:function(){var d,e;return d=_.clone(c.data.msg),e=a.rest,e.one("manager/msgs",d.id).patch({msg:d}).then(function(a){return b.g(a.msg)})},del_msg:function(d){var e;return e=a.rest,e.one("manager/msgs",d.id).remove().then(function(a){return b.g(a.msg),"success"===a.msg.status?(c.data["new"]=c.data.edit=!1,c.data.msgs=_.reject(c.data.msgs,{id:a.id})):void 0})},load_pub:function(){return c.init?void 0:(c.init=!0,c.load_pub_msgs())},load_pub_msgs:function(){var b;return b=a.fest(),b.all("msgs").getList().then(function(a){return c.data.msgs=a})},load:function(){return c.init?void 0:(c.init=!0,c.load_msgs())},load_msgs:function(){var b;return b=a.fest(),b.all("manager/msgs").getList().then(function(a){return c.data.msgs=a})},set_msg:function(a){var b;return b=null!=a?a:f(),c.data.msg=b},data:{msgs:[],"new":!0,edit:!1,msg:f(),sdate_opt:e(),edate_opt:e()}}}])}.call(this),function(){"use strict";angular.module("brasFeApp").directive("ckeditor",function(){return{require:"?ngModel",link:function(a,b,c,d){var e;return e=CKEDITOR.replace(b[0]),e.on("pasteState",function(){return a.$apply(function(){return d.$setViewValue(e.getData())})}),d.$render=function(){return e.setData(d.$modelValue)}}}})}.call(this),function(){"use strict";angular.module("brasFeApp").factory("datagen",function(){var a;return new(a=function(){function a(){}return a.prototype.nvp=function(a,b){return{name:a,value:b}},a.prototype.date_opt=function(){return{minDate:"'2014/11/10'",maxDate:"'2014/11/21'",open:!1,startingDay:1}},a}())})}.call(this),function(){"use strict";angular.module("brasFeApp").factory("errorHandler",["$q","$log","$rootScope","growl",function(a,b,c,d){var e;return e=function(a){var b,c;return a&&a.msg?(c=d[a.status],b=a.msg,c(b.body,{title:b.title})):void console.log("unscoped server error")},{response:function(b){return b||a.when(b)},responseError:function(f){var g;switch(b.debug("error with status "+f.status+" and data: "+f.data.message),g=f.data,e(g),c.$broadcast("httpError",f.status),f.status){case 400:d.error("如果您仍需這個功能，請來信:<mailto:little_beaver@gmail.com>",{title:"參數錯誤"});break;case 404:d.error("找不到您要的功能",{title:"找不到海狸"});break;case 405:d.error("系統回應：您無法使用此功能",{title:"被限制的功能"});break;case 406:d.error("抱歉，系統無法處理您的請求",{title:"無法處理的請求"});break;case 408:d.error("請確認連線狀態及網路速度",{title:"請求逾時"});break;case 0:d.error("No connection, check your internet connection. Or the server might be maintainace.");break;default:f.status>=500?d.error("正在記錄錯誤，並且尋找海狸工程師來修理",{title:"海狸忙碌中..."}):f.status<400&&d.error("Error: "+f,{title:"未知的錯誤",ttl:1e6})}return a.reject(f)}}}])}.call(this),function(){"use strict";angular.module("brasFeApp").directive("landingSize",["$window",function(a){return function(b){var c;return c=angular.element(a),b.getWindowDimensions=function(){return{h:c.height(),w:c.width()}},b.$watch(b.getWindowDimensions,function(a){return b.windowHeight=a.h,b.windowWidth=a.w,b.style=function(){return{height:a.h-100+"px",width:"100%"}}},!0),c.bind("resize",function(){return b.$apply()})}}])}.call(this),function(){"use strict";angular.module("brasFeApp").service("notify",["growl",function(a){var b;return b={ttl:3e3,g:function(c){var d;return(d=a[c.status])(c.body,{title:c.title,ttl:b.ttl})},c:function(a){return console.log(a)},gc:function(a){return b.g(a),b.c(a)}}}])}.call(this),function(){"use strict";angular.module("brasFeApp").service("sessionInjector",["sessionServ",function(a){var b;return b={request:function(b){return a.isGuest()||(b.headers["x-auth-login"]=a.user.login_alias,b.headers["x-auth-token"]=a.user.auth_token),b}}}])}.call(this),function(){"use strict";angular.module("brasFeApp").factory("sestangular",["Restangular","Config",function(a,b){var c;return c=function(a){return"http://"+a+"/"},{rest:function(d,e){return e.cache=null!=e.cache?e.cache:!0,a.withConfig(function(a){return a.setBaseUrl(c(b.host)),a.setDefaultHttpFields({cache:e.cache,withCredentials:!0}),a.setRestangularFields({id:"_id",route:"restangularRoute",selfLink:"self.href"}),a.setDefaultHeaders({"Content-Type":"application/json","X-AUTH-LOGIN":d.login_alias||"","X-AUTH-TOKEN":d.auth_token||"","X-Requested-With":"XMLHttpRequest",Accept:"application/bebras.tw; ver=1"})})}}}])}.call(this),function(){"use strict";angular.module("brasFeApp").classy.controller({name:"admin.baseCtrl",inject:{$scope:"$",$state:"st",dashUser:"du",menu:"menu",sessionServ:"session"},_state_base:"dashboard.admin",init:function(){return this.$.data={menu:{serv:this.menu.data,selected:{}},menuTree:{beforeDrag:this._menu_before_drag,dropped:this._reorder_menu_pos},users:{},edit_role:""},this.$.userGrid={data:"data.users"},this.$.$on("$stateChangeStart",this._sc_start),this.$.$on("$stateChangeSuccess",this._sc_succ),this.$.$on("users_loaded",this._evt_users_loaded)},_sc_start:function(a,b){return this.session.auth_state(a,b.name)},_sc_succ:function(a,b){return this.session.is_valid_state(this.st)?b.name===""+this._state_base+".users"?this.du.load_users():b.name===""+this._state_base+".tasks"?this.du.load_users():void 0:void 0},_evt_users_loaded:function(){return this.$.data.users=this.du.users},_reorder_menu_pos:function(a){var b,c;return c=a.source.nodesScope.$modelValue,b=0,_.each(c,function(a){return a.pos=b,b+=1})},_menu_before_drag:function(a){return a.$element.addClass("dragging")},watch:{"data.edit_role":function(a){return a?this.menu.get_menu_list(a):void 0}},not_in_base:function(){return null==this.$.user?!1:!this.st.is("dashboard."+this.$.user.role.name)},show_menu_item:function(a){var b;return b=a.$modelValue,this.$.data.menu.selected=b},menu_item_selected:function(a){return this.$.data.menu.selected===a},menu_cancel_edit:function(){return this.$.data.menu.selected={},this.$.data.menu.serv.raw={},this.st.go(state_base)},menu_save:function(){return this.menu.update_raw(this.$.data.edit_role)},menu_mark_as_remove:function(a){var b;return b=a.$modelValue,b.destroy=!b.destroy},menu_add:function(){var a;return a=this.$.data.menu.serv.raw.length,this.$.data.menu.serv.raw.push({id:-1,name:"New item",pos:a,nodes:[]})}})}.call(this),function(){"use strict";angular.module("brasFeApp").controller("DashMenuCtrl",["$scope","$state","menu",function(a,b,c){return a.data=c.data,a.$on("$stateChangeSuccess",function(){return b.includes("dashboard.**")?(c.load(),a.data=c.data):void 0}),a.$on("role_switched",function(){return c.reload()}),a.menu_click=function(d){var e;return a.clicked=d,c.data.clicked=d,e="dashboard."+c.role()+"."+d.link,b.transitionTo(e)}}])}.call(this),function(){"use strict";angular.module("brasFeApp").classy.controller({name:"manager.BulletinCtrl",inject:{$scope:"$",bulletin:"bt"},init:function(){return this.$.data=this.bt.data,this.$.$on("$stateChangeSuccess",this._on_state_changed)},_on_state_changed:function(){return this.bt.load()},watch:{"data.msg.start_time":function(a){return this.bt.ensure_end(a)}},msg_editor_visible:function(){return this.$.data["new"]||this.$.data.edit},cancel_editor:function(){return this.$.data["new"]=!1,this.$.data.edit=!1,this.bt.cancel_edit()},new_msg:function(){return this.$.data["new"]=!0,this.$.data.edit=!1,this.bt.set_msg()},del_msg:function(a){return confirm("確定移除？")?this.bt.del_msg(a):void 0},edit_msg:function(a){return this.$.data["new"]=!1,this.$.data.edit=!0,this.bt.set_msg(a)},add_msg:function(){return this.$.data["new"]=!1,this.bt.add_msg()},update_msg:function(){return this.$.data.edit=!1,this.bt.update_msg()},open_calendar:function(a,b){return a.preventDefault(),a.stopPropagation(),"edate_opt"===b&&(this.$.data[b].minDate=this.$.data.msg.start_time),this.$.data[b].open=!this.$.data[b].open},msg_start_cal_disable:function(){return!1},msg_end_cal_disable:function(){return!1}})}.call(this),function(){"use strict";angular.module("brasFeApp").classy.controller({name:"manager.ContestsCtrl",inject:{$scope:"$",$state:"st",managerContests:"mc"},_on_contest_created:function(a,b){return this.mc.data.contests.push(b),this.st.go("^")},init:function(){return this.$.data=this.mc.data,this.$.$on("contest:created",this._on_contest_created),this.mc.load()},remove:function(a){return confirm("確定移除？")?this.mc.remove(a):void 0},edit:function(a){return this.st.includes("**.contests.new")||this.st.includes("**.contests.edit")?this.st.go("^.edit",{id:a.id}):this.st.go(".edit",{id:a.id})}})}.call(this),function(){"use strict";angular.module("brasFeApp").classy.controller({name:"manager.contests.EditCtrl",inject:{$scope:"$",$state:"st",$stateParams:"stp",managerContest:"mc"},init:function(){return this.mc.load(this.stp.id),this.$.data=this.mc.data},_cal_disable:function(a,b){var c;return c=a.getDay(),"day"===b&&(0===c||6===c)},sdate_cal_disable:function(a,b){return this._cal_disable(a,b)},edate_cal_disable:function(a,b){return this._cal_disable(a,b)},open_cal:function(a,b){var c;return a.preventDefault(),a.stopPropagation(),c=this.$.data.opt[b].open,this.$.data.opt[b].open=!c},watch:{"data.grading":function(a,b){return a!==b?this.mc.update_grading(a):void 0}},rats:function(a){var b;return b=["無","易","中","難"],b[a]},add_ctask:function(a){return this.mc.data.tasks=_.reject(this.mc.data.tasks,function(b){return b.id===a.id}),this.mc.data.ctasks.push(a)},remove_ctask:function(a){return this.mc.data.ctasks=_.reject(this.mc.data.ctasks,function(b){return b.id===a.id}),this.mc.data.tasks.push(a)},ctask_info:function(){var a;return a={},_.each(this.mc.data.ctasks,function(b){var c;return c=a["r_"+b.rating],a["r_"+b.rating]=null!=c?c+1:1}),"易: "+(a.r_1||0)+", 中: "+(a.r_2||0)+", 難: "+(a.r_3||0)},cancel:function(){return this.st.go("^")},save:function(){return this.mc.update()}})}.call(this),function(){"use strict";angular.module("brasFeApp").classy.controller({name:"manager.contests.NewCtrl",inject:{$scope:"$",$state:"st",managerContest:"mc"},_cal_disable:function(a,b){var c;return c=a.getDay(),"day"===b&&(0===c||6===c)},sdate_cal_disable:function(a,b){return this._cal_disable(a,b)},edate_cal_disable:function(a,b){return this._cal_disable(a,b)},init:function(){return this.mc.reset(),this.$.data=this.mc.data},open_cal:function(a,b){var c;return a.preventDefault(),a.stopPropagation(),c=this.$.data.opt[b].open,this.$.data.opt[b].open=!c},watch:{"data.grading":function(a,b){return a!==b?this.mc.update_grading(a):void 0}},rats:function(a){var b;return b=["無","易","中","難"],b[a]},add_ctask:function(a){return this.mc.data.tasks=_.reject(this.mc.data.tasks,function(b){return b.id===a.id}),this.mc.data.ctasks.push(a)},remove_ctask:function(a){return this.mc.data.ctasks=_.reject(this.mc.data.ctasks,function(b){return b.id===a.id}),this.mc.data.tasks.push(a)},ctask_info:function(){var a;return a={},_.each(this.mc.data.ctasks,function(b){var c;return c=a["r_"+b.rating],a["r_"+b.rating]=null!=c?c+1:1}),"易: "+(a.r_1||0)+", 中: "+(a.r_2||0)+", 難: "+(a.r_3||0)},cancel:function(){return this.st.go("^")},save:function(){return this.mc.create()}})}.call(this),function(){"use strict";angular.module("brasFeApp").classy.controller({name:"manager.FilesCtrl",inject:{$scope:"$",managerFiles:"mf"},init:function(){return this.$.data=this.mf.data}})}.call(this),function(){"use strict";angular.module("brasFeApp").classy.controller({name:"manager.baseCtrl",inject:{$scope:"$"},init:function(){return this.$.$on("$stateChangeSuccess",this._scs)},_scs:function(){return""}})}.call(this),function(){"use strict";angular.module("brasFeApp").classy.controller({name:"manager.TasksCtrl",inject:{$scope:"$",$state:"st",$timeout:"timeout",managerTasks:"mt"},_on_task_created:function(a,b){return this.mt.data.tasks.push(b)},_on_task_updated:function(a,b){var c;return c=_.findIndex(this.mt.data.tasks,function(a){return a.tid===b.tid}),this.mt.data.tasks[c]=b},_on_state_change:function(){return this._stop_timer()},_on_timeout:function(){return this.mt.data.hoverable=!0},_stop_timer:function(){return this.timeout.cancel(this.$.timer),this.mt.data.hoverable=!0},init:function(){return this.$.data=this.mt.data,this.mt.init(),this.$.$on("$stateChangeStart",this._on_state_change),this.$.$on("task:created",this._on_task_created),this.$.$on("task:updated",this._on_task_updated)},hover_tsk:function(a){return this.mt.data.hoverable?(this.mt.data.task=a,this.mt.data.clicked=!1,this.mt.data.hovered=!0):void 0},click_tsk:function(a){return this.mt.data.task=a,this.mt.data.clicked=!0,this.mt.data.hovered=!1,this._stop_timer(),this.mt.data.hoverable=!1,this.$.timer=this.timeout(this._on_timeout,5e3)},show_hover:function(){return _.keys(this.$.data.task).join(",")},clicked_tsk:function(a){return a.tid===this.mt.data.task.tid?"clicked":void 0},range:function(a){return _.range(0,a)},watch:{"data.query":function(){return this.mt.reload_tasks()}},show:function(a){return this.mt.data.show=a},remove:function(a){return confirm("確定移除？")?this.mt.remove(a):void 0},edit:function(a){return this.st.go("dashboard.manager.tasks.edit",{id:a.tid})}})}.call(this),function(){"use strict";angular.module("brasFeApp").classy.controller({name:"manager.tasks.EditCtrl",inject:{$scope:"$",$state:"st",$stateParams:"stp",managerTask:"nt"},_on_task_updated:function(){return this.st.go("^")},_on_state_changed:function(){return this.nt.load_by_id(this.stp.id)},init:function(){return this.$.data=this.nt.data,this.$.$on("task:updated",this._on_task_updated),this.$.$on("$stateChangeSuccess",this._on_state_changed)},tab_click:function(a){return this.nt.data.clicked=a},is_tab_clicked:function(a){return this.nt.data.clicked===a?"active":""},clicked:function(a){return this.nt.data.clicked.value===a},unset_rating:function(a){return a.value=0},hovering_rating:function(){},rating_text:function(a){var b;return b=["無","易","中","難"],b[a.value]},mark_answer:function(a){return a.answer=!a.answer},save_task:function(){return this.nt.update()},cancel:function(){return this.st.go("^")},json_size:function(){return this.nt.json_size(this.nt.data.task)}})}.call(this),function(){"use strict";angular.module("brasFeApp").classy.controller({name:"manager.tasks.NewCtrl",inject:{$scope:"$",$state:"st",managerTask:"nt",managerTasks:"nts"},_on_task_created:function(){return this.st.go("^")},init:function(){return this.$.data=this.nt.data,this.$.$on("task:created",this._on_task_created)},tab_click:function(a){return this.nt.data.clicked=a},is_tab_clicked:function(a){return this.nt.data.clicked===a?"active":""},clicked:function(a){return this.nt.data.clicked.value===a},unset_rating:function(a){return a.value=0},hovering_rating:function(){},rating_text:function(a){var b;return b=["無","易","中","難"],b[a.value]},mark_answer:function(a){return a.answer=!a.answer},save_task:function(){return this.nt.save()},cancel:function(){return this.st.go("^")},json_size:function(){return this.nt.json_size(this.nt.data.task)}})}.call(this),function(){"use strict";angular.module("brasFeApp").classy.controller({name:"manager.UsersCtrl",inject:{$scope:"$",managerUsers:"mu"},_state_base:"dashboard.admin",init:function(){return this.$.data=this.mu.data},load_user:function(a){return this.$.list_mod="teacher_applicant"===a?"ta":"",this.mu.load_users(a)},user_style:function(){return this.$.data.mod},watch:{"data.pager.page":function(a,b){return a!==b?this.mu.load_users():void 0},"data.pager.per_page":function(a,b){return a!==b&&""!==this.mu.data.mod?this.mu.load_users():void 0}},is_teacher_applicant:function(a){return"teacher_applicant"===a.role.name},is_loading:function(){return this.mu.data.loading||"no data"},mark_teacher:function(a){return this.mu.mark_teacher(a)}})}.call(this),function(){"use strict";angular.module("brasFeApp").classy.controller({name:"student.baseCtrl",inject:{$scope:"$"},init:function(){return this.$.$on("$stateChangeSuccess",this._scs)},_scs:function(){return""}})}.call(this),function(){"use strict";angular.module("brasFeApp").classy.controller({name:"teacher.groups.EnrollmentsCtrl",inject:{$scope:"$",$filter:"fil",$stateParams:"sp",studentEnrollments:"se"},_sort:function(){return this.fil("orderBy")},_state_base:"dashboard.teacher",_on_enroll_next:function(a,b){return this.$.data.users.length>b?this.se.enroll(this.$.data.users[b],b):this.se.load_enrollments()},_scs:function(){return this.se.set_gid(this.sp.id),this.se.load()},init:function(){return this.$.data=this.se.data,this.$.$on("$stateChangeSuccess",this._scs),this.$.$on("enroll_next",this._on_enroll_next)},_parse_file:function(a){return function(b){return function(c){var d;return d=b.$.data.users.length,b.$.data.users=b.$.data.users.concat(c),b.se.enroll(b.$.data.users[d],d),a.cancel()}}(this)},file_added:function(a,b){return b.preventDefault(),this.se.read_csv(a.file).then(this._parse_file(a))},delete_checked:function(){return this.se.delete_checked()},watch:{check_all:function(a){return this.se.data.del_users=a?this.$.data.users.map(function(a){return a.id}):[]}},new_enrollment:function(){return this.se.new_enrollment()},make_dirty:function(a){return a.dirty=!0},save_edited:function(){return this.se.save_edit()},sort_status:function(a){var b;return b=["minus-square-o","arrow-down","arrow-up"],"fa-"+b[a.sort]},sort_by:function(a){return a.sort=(a.sort+1)%3},precs:function(){var a;return a=this.se.predicates()},svid:function(a){return a.id}})}.call(this),function(){"use strict";angular.module("brasFeApp").classy.controller({name:"teacher.GroupsCtrl",inject:{$scope:"$",teacherGroup:"tg"},init:function(){return this.$.data=this.tg.data,this.$.$on("$stateChangeSuccess",this._scs)},_scs:function(){return this.tg.load()},group_new:function(){var a;return a=this.tg.data.groups["new"],this.tg.data.groups["new"]=!a},cant_add_group:function(a){return this.$.data.groups.new_submitted||a.$invalid},cant_update_group:function(a){return this.$.data.groups.edit_submitted||a.$invalid},group_update:function(a){return this.$.data.groups.edit=!1,this.tg.update_group(),a.$setPristine()},group_add:function(a){return this.$.data.groups["new"]=!1,this.tg.add_group(),a.$setPristine()},del_group:function(a){return confirm("確定移除？")?this.tg.del_group(a):void 0},group_new_cancel:function(){return this.$.data.groups.new_submitted=!1,this.$.data.groups["new"]=!1,this.$.data.groups.edit=!1},open_calendar:function(a){return a.preventDefault(),a.stopPropagation(),this.$.data.groups.exdate_opt.open=!this.$.data.groups.exdate_opt.open},group_exdate_cal_disable:function(a,b){var c;return c=a.getDay(),"day"===b&&(0===c||6===c)},form_invalid:function(a){return a.$invalid&&!a.$pristine},reload_groups:function(){return this.tg.load_groups(!0)},cluster_str:function(a){var b;return b=this.tg.find_local(a,"clusters"),b.name},extime_str:function(a){var b;return b=this.tg.find_local(a,"time_sec"),b.name},edit_group:function(a){var b;return b=this.$.data.groups.edit,this.$.data.groups.edit=!b,b?void 0:this.tg.edit_group(a)}})}.call(this),function(){"use strict";angular.module("brasFeApp").classy.controller({name:"teacher.baseCtrl",inject:{$scope:"$",$state:"st",sessionServ:"se"},init:function(){return this.$.$on("$stateChangeStart",this._sc_start),this.$.$on("$stateChangeSuccess",this._sc_succ)},_sc_start:function(){},_sc_succ:function(){return this.st.is("dashboard.teacher")?this.st.go("dashboard.teacher.groups"):void 0}}),angular.module("brasFeApp").classy.controller({name:"teacher.PersonalCtrl",inject:{$scope:"$",sessionServ:"session",teacherGroup:"tg"},init:function(){return console.log(this.tg.data.groups.list.length),this.$.$on("$stateChangeSuccess",this._scs),this.$.user=this.session.user},_scs:function(){return""}})}.call(this),function(){"use strict";angular.module("brasFeApp").classy.controller({name:"user.GroupsCtrl",inject:{$scope:"$",$state:"st",userGroup:"ug"},init:function(){return this.$.data=this.ug.data,this.$.$on("$stateChangeSuccess",this._scs)},_scs:function(){return""},join_form_visible:function(){return this.ug.data.join.show},join_grp:function(a){return this.ug.data.join.show=!this.ug.data.join.show,this.ug.data.join.show?void 0:(a.$setPristine(),this.$.school="",this.ug.new_join())},cancel:function(a){return this.$.join_grp(a)},get_school_list:function(a){return this.ug.sclist(a).then(function(a){return a})},watch:{"{object}school":function(a){var b;return b=this.ug.data.join.form,"string"==typeof a&&delete b.moeid,a&&"object"==typeof a&&"moeid"in a?b.moeid=a.moeid:void 0}},set_moeid:function(a){var b;return b=this.ug.data.join.form,b.moeid=a.moeid},field_not_set:function(a,b){var c,d;return c=this.ug.data.join.form,d=!(a in c&&null!=c[a]),d&&!b[a].$pristine},join:function(){return this.ug.join()}})}.call(this),function(){"use strict";angular.module("brasFeApp").classy.controller({name:"user.baseCtrl",inject:{$scope:"$",$state:"st",sessionServ:"se"},init:function(){return this.$.$on("$stateChangeStart",this._sc_start),this.$.$on("$stateChangeSuccess",this._sc_succ)},_sc_start:function(){return""},_sc_succ:function(){}})}.call(this),function(){"use strict";var a,b,c,d,e,f;a=function(a){return a[0].toUpperCase()+a.slice(1)},e=function(b,c){return"Da"+a(b.substr(0,2))+a(c)+"Ctrl"},b=function(b,c){return""+b+"."+a(c)+"Ctrl"},f=function(b,c,d){return""+b+"."+c+"."+a(d)+"Ctrl"},c={dbmain:{url:"dashboard",parent:"root","abstract":!0,views:{main:{templateUrl:"app/dashboard/view/base.html",controller:"DashboardCtrl"}}},base:function(a){return{url:"",templateUrl:"app/dashboard/view/base.html",parent:"dashboard",views:{menu:{templateUrl:"app/dashboard/view/menu.html",controller:"DashMenuCtrl"},panel:{templateUrl:"app/dashboard/view/"+a+"/base.html",controller:""+a+".baseCtrl"}}}},extend:function(a,b){return{url:"/"+b,parent:"dashboard."+a,views:{box:{templateUrl:"app/dashboard/view/"+a+"/"+b+".html"}}}},sub:function(a,b,c){var d;return d="new"===c?"/"+c:"/:id/"+c,{url:d,parent:"dashboard."+a+"."+b,views:{scroll:{templateUrl:"app/dashboard/view/"+a+"/"+b+"/"+c+".html",controller:f(a,b,c)}}}},magic:function(a,b,d){var e,f,g;return null==b?c.base(a):(g=c.extend(a,b),f=["manager","teacher","user"],_.include(f,a)&&(e=d(a,b),g.views.box.controller=e),g)},m:function(a,d){return c.magic(a,d,b)},mk_route:function(a,b,c){var d;return d="dashboard."+a,d+=null!=b?"."+b:"",d+=null!=c?"."+c:""},gt_state:function(a,b,d){return null!=d?c.sub(a,b,d):null!=b?c.m(a,b):c.base(a)},mk_state:function(a,b,d,e){var f,g;return f=c.mk_route(b,d,e),g=c.gt_state(b,d,e),a.state(f,g)},ms:function(a,b,d,e){return c.mk_state(a,b,d,e)}},d=c,angular.module("brasFeApp").config(["$stateProvider",function(a){var b,c;return b=a.state("dashboard",d.dbmain),c=function(a,c,e){return d.ms(b,a,c,e)},c("teacher"),c("teacher","personal"),c("teacher","groups"),c("teacher","groups","enrollments"),c("teacher_applicant"),c("user"),c("user","groups"),c("manager"),c("manager","bulletin"),c("manager","users"),c("manager","files"),c("manager","tasks"),c("manager","tasks","new"),c("manager","tasks","edit"),c("manager","contests"),c("manager","contests","new"),c("manager","contests","edit"),c("admin"),c("admin","users"),c("admin","tasks"),c("admin","menu")}]),angular.module("brasFeApp").classy.controller({name:"DashboardCtrl",inject:{$scope:"$",$state:"st",menu:"menu",growl:"gw",sessionServ:"se"},init:function(){return this.se.warm_up(),this.$.data={menu:this.menu.data,role:{}},this.$.$on("$stateChangeStart",this._on_sc_start),this.$.$on("$stateChangeSuccess",this._on_sc_ok),this.$.$on("redirect",this._on_redirect),this.$.$on("$stateNotFound",this._on_no_state),this.$.$on("role_switched",this._role_switched)},_current_role:function(a){var b,c;return c=this.se.user.roles,b=_.findIndex(c,function(b){return b.id===a.id}),0>b?c[0]:c[b]},_on_sc_start:function(a,b){return this.se.auth_state(a,b.name)},_on_sc_ok:function(a,b){var c;return this.se.auth_user(b.name,this.st),this.se.is_valid_state(this.st)?(c=this.se.user,this.$.user=c,this.$.data.role=this._current_role(c.role)):void 0},_on_redirect:function(a,b){return"dashboard"===b?this.st.go(b+"."+this.se.user.role.name):void 0},_on_no_state:function(a){return this.gw.error("未實作的功能",{title:"Oops"}),a.preventDefault()},watch:{"data.role":function(a,b){return b.id!==a.id?this.se.switch_role(a.id):void 0}},logout:function(){return this.se.logout()}})}.call(this),function(){"use strict";angular.module("brasFeApp").service("dashUser",["$rootScope","sessionServ",function(a,b){var c;return c={users:{},user:{},init:!1,load:function(){return c.init?void 0:(c.init=!0,c.user=b.user)},load_users:function(){var d,e;return d=b.rest,e=b.user.role,d.all(""+e.name+"/users").get("").then(function(b){return c.users=b.data,a.$broadcast("users_loaded")})}}}])}.call(this),function(){"use strict";angular.module("brasFeApp").service("managerUsers",["sessionServ","notify",function(a,b){var c;return c={init:!1,data:{loading:"",pager:{page:1,per_page:30},users:[],mod:""},load:function(){return c.init?void 0:c.init=!0},load_users:function(a){return c.data.loading="資料讀取中...",a=a||c.data.mod,c.load_users_req(a)},load_users_req:function(b){var d,e;return e=a.user.role.name,d=a.fest().all(""+e+"/users"),d.one("list",b).get(c.data.pager).then(function(a){return c.data.users=a.users,c.data.pager.total=a.total,c.data.mod=b,c.data.loading=null})},mark_teacher:function(d){var e,f;return f=a.user.role.name,e=a.fest().all(""+f+"/users"),e.one("approve_teacher").post("",{id:d.id}).then(function(a){return b.g(a.msg),"success"===a.msg.status?c.data.users=_.reject(c.data.users,function(a){return a.id===d.id}):void 0})}}}])}.call(this),function(){"use strict";angular.module("brasFeApp").service("userGroup",["$rootScope","sessionServ","notify",function(a,b,c){var d,e;return e=function(){return{moeid:"",suid:"",gcode:""}},d={init:!1,data:{groups:[],join:{form:e(),show:!0}},sclist:function(a){return b.sclist(a)},new_join:function(){return d.data.join.form=e()},join:function(){var a,e;return a=_.clone(d.data.join.form),e=b.fest().one("user/ugroups","join"),e.post("",{grp:a}).then(function(a){return c.g(a.msg)})}}}])}.call(this),function(){"use strict";angular.module("brasFeApp").service("managerContest",["$rootScope","sessionServ","notify","datagen",function(a,b,c,d){var e,f,g;return g=[d.nvp("Beaver",0),d.nvp("Benjemin",1),d.nvp("Cadet",2),d.nvp("Junior",3),d.nvp("Senior",4)],f=function(){return{name:"",sdate:"2014-11-10",edate:"2014-11-21",grading:4,task_ids:[]}},e={data:{gradings:g,grading:g[4],tasks:[],ctasks:[],query:{},opt:{sdate:d.date_opt(),edate:d.date_opt()},contest:f()}},e.reset=function(){return e.data.contest=f(),e.update_grading(e.data.grading)},e.update_grading=function(a,c){var d;return null==c&&(c=!0),d=b.fest().all("manager/tasks"),d.all("list").get("",{rating:a.name}).then(function(a){return c&&(e.data.ctasks=[]),e.data.tasks=c?a:_.reject(a,function(a){var b;return b=_.findIndex(e.data.ctasks,function(b){return b.id===a.id}),b>=0})})},e.contest_obj=function(){var a;return a=_.clone(e.data.contest),a.grading=e.data.grading.value,a.task_ids=_.pluck(e.data.ctasks,function(a){return a.id}),a},e.create=function(){var d,f;return d=e.contest_obj(),f=b.fest().one("manager/contests"),f.post("",{contest:d}).then(function(b){return c.g(b.msg),"success"===b.msg.status?a.$broadcast("contest:created",b.data):void 0})},e.load=function(a){var c,d;return c=e.contest_obj(),d=b.fest().one("manager/contests",a),d.get("").then(function(a){return"success"===a.status?(e.data.contest=a.data,e.data.ctasks=a.data.tasks,e.update_grading({name:a.data.grading_str},!1)):void 0})},e.update=function(){var d,f;return d=e.contest_obj(),f=b.fest().one("manager/contests"),f.post("",{contest:d}).then(function(b){return c.g(b.msg),"success"===b.msg.status?a.$broadcast("contest:updated",b.data):void 0})},e}])}.call(this),function(){"use strict";angular.module("brasFeApp").service("managerContests",["sessionServ","notify","datagen",function(a,b){var c;return c={inited:!1,data:{contests:[]}},c.load=function(){var b;if(!c.inited)return c.inited=!0,b=a.fest().all("manager/contests"),b.get("").then(function(a){return c.data.contests=a})},c.remove=function(d){var e;return e=a.fest().one("manager/contests",d.id),e.remove("").then(function(a){return b.g(a.msg),"success"===a.msg.status?c.data.contests=_.reject(c.data.contests,function(a){return a.id===d.id}):void 0})},c}])}.call(this),function(){"use strict";angular.module("brasFeApp").service("managerFiles",["$rootScope","sessionServ","notify","datagen",function(){var a;return a={data:{upload:{},files:[]}}}])}.call(this),function(){"use strict";angular.module("brasFeApp").service("menu",["$log","sessionServ","growl",function(a,b,c){var d,e;return d=function(a){var b,d;return b=c[a.status],d=a.msg,b(d.body,{title:d.title})},e={init:!1,data:{clicked:{},menu:{},raw:{},tube:{player:null,visible:!1,vars:{autoplay:0}}},reload:function(){return e.init=!1,e.load()},load:function(){return e.init?void 0:(e.init=!0,e.load_menu())},role:function(){return b.user.role.name},load_menu:function(){var a;return a=b.rest,a.all("dashboard/menu?t="+_.now()).get("").then(function(a){return e.data.menu=a.menu})},get_menu_list:function(a){var c;return c=b.fest(),c.all("dashboard/menu?edit="+a).get("").then(function(a){return e.data.raw=a.menu})},update_raw:function(a){var c,f,g;return c={role:a,menu:e.data.raw},f=b.fest(),g=b.user.role.name,f.all(""+g).one("menu").post("",c).then(function(b){return e.get_menu_list(a),d(b)})}}}])}.call(this),function(){"use strict";angular.module("brasFeApp").service("managerTask",["$rootScope","sessionServ","notify",function(a,b,c){var d,e,f,g,h;return h=[{name:"基本設定",value:"basic"},{name:"題文及問題",value:"body"},{name:"選項",value:"choices"},{name:"資訊",value:"info"},{name:"其他",value:"misc"}],f=function(){return[{key:"beaver",value:0},{key:"benjamin",value:0},{key:"cadet",value:0},{key:"senior",value:0},{key:"junior",value:0}]},e=function(a){return null==a&&(a=0),{index:a,content:"",answer:!1}},g=function(){return{ratings:f(),choices:_.map([0,1,2,3],function(a){return e(a)}),authors:[],keywords:[],klasses:[],opens:[]}},d={data:{init:!1,task:g(),tabs:h,clicked:h[0]}},d._serve=function(e,f){var h,i;
return h=_.clone(d.data.task),i=b.fest(),i="patch"===e?i.one("manager/tasks",h.id):i.all("manager/tasks"),i[e]({task:h}).then(function(b){return c.g(b.msg),"success"===b.msg.status?(d.data.task=g(),a.$broadcast("task:"+f,b.task)):void 0})},d.update=function(){return d._serve("patch","updated")},d.save=function(){return d._serve("post","created")},d.json_size=function(a){var b,c,d;return d=JSON.stringify(a),b=encodeURIComponent(d).match(/%[89ABab]/g),c=null!=b?b.length:0,d.length+c},d.load_by_id=function(a){var c;return c=b.fest().one("manager/tasks",a),c.get("").then(function(a){return d.data.task=a})},d}])}.call(this),function(){"use strict";angular.module("brasFeApp").service("managerTasks",["sessionServ","notify",function(a,b){var c;return c={inited:!1,data:{tasks:[],task:{},hovered:!1,hoverable:!0,clicked:!1,query:"",show:"info"}},c.load_tasks=function(){var b;return b=a.fest().all("manager/tasks"),b.getList({query:_.parseInt(c.data.query)}).then(function(a){return c.data.tasks=a})},c.init=function(){return c.inited?void 0:(c.inited=!0,c.load_tasks())},c.reload_tasks=function(){return c.load_tasks()},c.remove=function(d){var e;return e=a.fest().one("manager/tasks",d.tid),e.remove().then(function(a){return b.g(a.msg),"success"===a.msg.status?(c.data.tasks=_.reject(c.data.tasks,function(a){return a.tid===d.tid}),c.data.task={}):void 0})},c}])}.call(this),function(){"use strict";angular.module("brasFeApp").service("teacherGroup",["sessionServ","notify",function(a,b){var c,d,e,f,g,h;return d=function(a,b){return{name:a,value:b}},c=[d("普通班未分組",1),d("自然組",2),d("社會組",3),d("人文社會資優班",4),d("數理資優班",5),d("資訊相關科別",6),d("其他技職科別",7),d("其他(請註記)",0)],f=[d("上午(0730~1230)",0),d("下午(1300~1800)",1),d("晚上(1800~2200)",2)],h=function(){return{cluster:"",exdate:"2014/11/10",extime:f[0],grade:10,note:"",name:""}},g=function(a){var b;return b=_.clone(a,!0),b.cluster_id=a.cluster.value,b.extime=a.extime.value,b},e={data:{init:!1,groups:{"new":!1,new_submitted:!1,edit:!1,edit_submitted:!1,pager:{page:1},list:[],form_group:h(),exdate_opt:{minDate:"'2014/11/10'",maxDate:"'2014/11/21'",open:!1,startingDay:1},clusters:c,time_sec:f}}},e.notify_proc=function(){return b.g({status:"info",title:"處理中",body:"請稍後"})},e.add_group=function(){var c,d;return e.notify_proc(),d=a.rest,c=g(e.data.groups.form_group),d.one("teacher").post("ugroups",{grp:c}).then(function(a){return b.g(a.msg),"success"===a.msg.status?e.data.groups.list.push(a.data):void 0}),e.data.groups.form_group=h()},e.update_group=function(){var c,d;return e.notify_proc(),d=a.rest,c=g(e.data.groups.form_group),d.one("teacher/ugroups",c.id).patch({grp:c}).then(function(a){var d;return b.g(a.msg),"success"===a.msg.status?(d=_.findIndex(e.data.groups.list,function(a){return a.id===c.id}),e.data.groups.list[d]=a.data):void 0}),e.data.groups.form_group=h()},e.del_group=function(c){var d;return e.notify_proc(),d=a.rest,d.one("teacher/ugroups",c.id).remove().then(function(a){return b.g(a.msg),"success"===a.msg.status?e.data.groups.list=_.reject(e.data.groups.list,{id:c.id}):void 0})},e.load_groups=function(b){return b=a.fest().all("teacher/ugroups"),b.getList({pg:1}).then(function(a){return e.data.groups.list=a})},e.edit_group=function(a){var b;return b=_.clone(a,!0),b.cluster=e.find_local(a.cluster_id,"clusters"),b.extime=e.find_local(a.extime,"time_sec"),e.data.groups.form_group=b},e.find_local=function(a,b){var c,d;return c=e.data.groups[b],d=_.findIndex(c,function(b){return b.value===a}),c[d]},e.load=function(){return e.data.init?void 0:(e.data.init=!0,e.load_groups())},e}])}.call(this),function(){"use strict";angular.module("brasFeApp").service("studentEnrollments",["$rootScope","$q","sessionServ","notify",function(a,b,c,d){var e,f,g,h,i,j,k;return g=function(a){return"男"===a?1:"女"===a?0:-1},h=function(a,b){return{id:null,name:a[0],gender:a[1],suid:a[2],seat:a[3],status:{name:b.n||"處理中",value:b.v||"handling"}}},f=function(a,b,c){return null==c&&(c=0),{name:a,value:b,sort:c}},k=function(a,b){return a.id=b.user.id,a.status=b.user.status,a.error=b.user.error},j=function(a){var b;return b=_.clone(a),b.gender=g(b.gender),b},e=function(a,b){var c,d,e,f,g;for(b=b||",",e=new RegExp("(\\"+b+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+b+"\\r\\n]*))","gi"),c=[[]],d=null;d=e.exec(a.replace(/\t/g,","));)f=d[1],f.length&&f!==b&&c.push([]),g=void 0,g=d[2]?d[2].replace(new RegExp('""',"g"),'"'):d[3],c[c.length-1].push(g);return c},i={read_csv:function(a){var c,d;return c=b.defer(),window.File&&window.FileReader&&window.FileList&&window.Blob?(d=new FileReader,void 0!==a&&null!==a?(d.onload=function(a){var b;b=_.map(e(a.target.result),h),c.resolve(b)},d.readAsText(a)):(c.resolve([]),growl.warning("沒有檔案."))):(c.resolve([]),growl.error("瀏覽器不支援此功能.")),c.promise},enroll_base:function(b,d,e){var f,g;return f=j(b),g=c.fest().one("teacher/ugroups",i.data.gid),g.post(e,{user:f}).then(function(c){return k(b,c),null!=d?a.$broadcast("enroll_next",d+1):void 0})},enroll:function(b,c){return"added"===b.status.value?void(null!=c&&a.$broadcast("enroll_next",c+1)):i.enroll_base(b,c,"enroll")},load:function(){return i.data.init?void 0:(i.data.init=!0,i.load_enrollments())},load_enrollments:function(){var a;return a=c.fest().one("teacher/ugroups",i.data.gid),a.getList("enrollments").then(function(a){return i.data.users=a})},delete_checked:function(){var a;if(0!==i.data.users.length)return a=c.fest().one("teacher/ugroups",i.data.gid),a.one("enrollments").post("",{ids:i.data.del_users}).then(function(a){return d.g(a.msg),i.data.users=_.filter(i.data.users,function(b){var c;return c=_.findIndex(a.keep,function(a){return b.id===a}),c>-1})})},set_gid:function(a){return i.data.gid=a,i.data.init=!1},new_enrollment:function(){var a,b;return b={n:"未處理",v:"new"},a=h(["new","","",""],b),i.data.users.splice(0,0,a)},save_edit:function(){return _.each(i.data.users,function(a){return"new"===a.status.value?i.enroll(a):a.dirty?i.enroll_base(a,null,"enroll"):void 0})},predicates:function(){var a;return a=[],_.each(i.data.cols,function(b){return 1===b.sort?a.push("+"+b.value):2===b.sort?a.push("-"+b.value):b.value}),a},data:{gid:null,init:!1,users:[],del_users:[],cols:[f("姓名","name"),f("性別","gender"),f("學號","suid"),f("座號","seat",1),f("狀態","status")]}}}])}.call(this),function(){"use strict";angular.module("brasFeApp").config(["$stateProvider",function(a){return a.state("root",{url:"/","abstract":!0,templateUrl:"app/landing/root.html",controller:"LandingCtrl"}).state("landing",{url:"",parent:"root",views:{main:{templateUrl:"app/landing/landing.html"}}})}]),angular.module("brasFeApp").classy.controller({name:"LandingCtrl",inject:{$sce:"sce",$scope:"$",$state:"st",sessionServ:"session",bulletin:"bull",menu:"menu"},init:function(){return this.session.warm_up(),this.bull.load_pub(),this.$.data={menu:this.menu.data,user:this.session.user,msgc:this.bull.data},this.$.$on("$stateChangeStart",this._on_st_change)},_on_st_change:function(){},_at_state:function(a){return this.st.is("session."+a)},dim_bg:function(){return this._at_state("login")||this._at_state("register")||this._at_state("reset")||this._at_state("student")},loggedin:function(){return this.session.is_user},logout:function(){return this.session.logout()},menu_clicked:function(){return null!=this.menu.data.clicked.name},toggle_menu_video:function(){return this.menu.data.tube.visible=!this.menu.data.tube.visible,null!=this.menu.data.tube.player?this.menu.data.tube.visible?this.menu.data.tube.player.playVideo():this.menu.data.tube.player.stopVideo():void 0},trust:function(a){return this.sce.trustAsHtml(a)}})}.call(this),function(){"use strict";angular.module("brasFeApp").config(["$stateProvider",function(a){return a.state("session",{url:"",parent:"root",views:{main:{templateUrl:"app/landing/landing.html"}}}).state("session.login",{url:"login",views:{control:{templateUrl:"components/form/session/login.html",controller:"SessionCtrl"}}}).state("session.student",{url:"student",views:{control:{templateUrl:"components/form/session/student.html",controller:"SessionCtrl"}}}).state("session.register",{url:"register",views:{control:{templateUrl:"components/form/session/register.html",controller:"SessionCtrl"}}}).state("session.reset",{url:"password/edit?reset_password_token",views:{control:{templateUrl:"components/form/session/pw_reset.html",controller:"SessionCtrl"}}}).state("session.auth",{url:"oauth/{provider}?code&state",views:{control:{template:"<h2></h2><h2>Loading...</h2>",controller:"SessionCtrl"}}}).state("session.gauth",{url:"gauth?key&login&role&role_id",views:{control:{template:"<h2></h2><h2>Loading...</h2>",controller:"SessionCtrl"}}})}]),angular.module("brasFeApp").classy.controller({name:"SessionCtrl",inject:{$scope:"$",$state:"st",$stateParams:"sp",$timeout:"timeout",$location:"loc",Config:"config",sessionServ:"session"},init:function(){return this.$.form={clear_time:9e4,submitted:!1},this.$.$on("$stateChangeStart",this._on_state_change),this.$.$on("$stateChangeSuccess",this._on_state_arrival),this.$.$on("$viewContentLoaded",this._on_view_loaded),this.$.$on("redirect",this._on_redirect),this.$.$on("httpError",this._on_http_error),this.$.timer=this.timeout(this.onTimeout,this.$.form.clear_time)},onTimeout:function(){return this.$.form.password="",this.$.form.password_confirmation="",this.$.timer=this.timeout(this.onTimeout,this.$.form.clear_time)},stop:function(){return this.timeout.cancel(this.$.timer)},_on_state_change:function(){return this.$.stop(),this.$.form.submitted=!1},_on_state_arrival:function(a,b){return"session.auth"===b.name?this.session.auth(this.sp):"session.gauth"===b.name?this.session.gauth(this.sp):void 0},_on_redirect:function(a,b){var c;return"dashboard"===b?(c=this.session.user.role?this.session.user.role.name:"user",this.st.go(b+"."+c)):void 0},_on_http_error:function(){return this.$.form.submitted=!1},_on_view_loaded:function(){var a;return a="reset_password_token","session.reset"!==this.st.current.name||a in this.sp&&this.sp[a]&&"true"!==this.sp[a]?void 0:this.st.go("landing")},watch:{school:function(a){return a&&"object"==typeof a&&"moeid"in a?this.$.form.moeid=a.moeid:void 0}},reset:function(){var a,b;return this.$.form.submitted=!0,b=_.clone(this.$.form),a=_.extend(b,this.sp),this.session.reset_pw(a)},register:function(){return this.$.form.submitted=!0,this.session.register(this.$.form)},login:function(){var a;return this.$.form.submitted=!0,a=_.clone(this.$.form),null!=a.moeid&&(a.login_alias=""+a.moeid+"-"+a.login_alias),this.session.login(a)},aquire_new_pw:function(){return this.session.request_link(this.$.form)},moeid_not_set:function(){return!("moeid"in this.$.form&&this.$.form.moeid)},get_school_list:function(a){return this.session.sclist(a).then(function(a){return a})},password_matched:function(a){return a.password===a.password_confirm},loginable:function(a){return!this.$.form.submitted&&a.$valid},resetable:function(a){return!this.$.form.submitted&&a.$valid&&!this.$.password_matched(a)},registerable:function(a){return!this.$.form.submitted&&a.$valid&&!this.$.moeid_not_set()},auth:function(a){var b;return this.$.form.submitted=!0,b="http://"+this.config.host,window.location.href=""+b+"/users/auth/"+a}}),angular.module("brasFeApp").service("sessionServ",["$rootScope","$cookieStore","$state","sestangular","growl",function(a,b,c,d,e){var f,g,h,i;return h=function(a){var b,c;return c=e[a.status],b=a.msg,c(b.body,{title:b.title})},g={login_alias:"",auth_token:"",roles:[],role:{name:"guest",id:1}},f=function(){},i={init:!1,is_user:!1,user:{login_alias:"",auth_token:""},redirect:"",rest:d.rest(g,{}),fest:function(){var a;return a={cache:!1},d.rest(i.user,a)},validate:function(){return i.is_user?i.rest.one("").get().then(function(){return h(data)}):void 0},warm_up:function(){var a;if(!i.init)return i.init=!0,a=b.get("tiny_beaver")||g,i.set_user(a)},update_session:function(a){var b;return b=d.rest(a,{}),b.one("session").get("").then(function(a){return i._session_base(a)})},gauth:function(a){return i.update_session({login_alias:a.login,auth_token:a.key})},auth:function(a){var b;return b="users/auth/"+a.provider+"/callback",i.rest.all(b).get("",a).then(function(a){return i._session_base(a)})},logout:function(){return i.rest.all("session").remove().then(function(a){return h(a),b.put("tiny_beaver",g),i.set_user(g)})},sclist:function(a){return i.rest.all("group/publist/school").getList({query:a})},set_user:function(a){return i.user=a,i.rest=d.rest(a,{}),i.is_user=i.user&&i.user.login_alias&&i.user.auth_token?!0:!1},request_link:function(b){return b&&"login_alias"in b&&b.login_alias?i.rest.all("password/forget").post(b).then(function(b){return h(b),b.status?a.$broadcast("redirect",b.redirect):void 0}):void h({status:"error",msg:{title:"錯誤",body:"請先輸入賬號"}})},register:function(a){return i.rest.one("user").post("",{user:a}).then(function(a){return i._session_base(a)})},login:function(a){return console.log("------------>",a),i.rest.one("session").post("",{user:a}).then(function(a){return i._session_base(a)})},reset_pw:function(a){return i.rest.one("password/reset").put(a).then(function(a){return i._session_base(a)})},_session_base:function(a){var b;return h(a),(b=i["_"+a.status])(a)},_success:function(c){return b.put("tiny_beaver",c.user),i.set_user(c.user),c.redirect?a.$broadcast("redirect",c.redirect):void 0},_error:function(){return i.set_user(g),a.$broadcast("sessionError")},isGuest:function(){return!i.user.login_alias&&!i.user.auth_token},switch_role:function(b){return e.warning("請稍後。。。",{title:"轉換中"}),i.fest().all("session/role").get("",{role_id:b}).then(function(b){return i._session_base(b),a.$broadcast("role_switched")})},base_state:function(){var a;return a=i.user.role,"dashboard."+a.name},is_valid_state:function(a){return a.includes(""+i.base_state()+".**")},auth_user:function(a,b){var c,d,e;return d=i.user.role.name,c=a.replace(/dashboard.(\w+).*/i,"$1"),"landing"!==c&&c!==d?(e=b.get(a.replace(c,d)),b.go(null!=e?e:"dashboard."+d)):void 0},auth_state:function(a,b){var c,d;return d=i.user.role.name,c=b.replace(/dashboard.(\w+).*/i,"$1"),"landing"!==c&&c!==d?a.preventDefault():void 0}}}])}.call(this),function(){"use strict";angular.module("brasFeApp").config(["$stateProvider",function(a){return a.state("tasks",{url:"/tasks",templateUrl:"app/task/task.html",controller:"TaskCtrl"})}]),angular.module("brasFeApp").controller("TaskCtrl",["$scope","sessionServ","sestangular",function(a,b){var c;return b.warm_up(),c=b,a.$on("$viewContentLoaded",function(){var b;return b=c.rest.all("task"),b.all("list").getList().then(function(b){return a.task_list=b})}),a.$watch("task_token",function(b){var d;if(b)return d=c.rest.all("task"),d.one(b.qid).get().then(function(b){return a.cur_task=b})})}])}.call(this),function(){"use strict";angular.module("brasFeApp").controller("NavbarCtrl",["$scope","$location",function(a,b){return a.menu=[{title:"Home",link:"/"}],a.isCollapsed=!0,a.isActive=function(a){return a===b.path()}}])}.call(this),angular.module("brasFeApp").run(["$templateCache",function(a){"use strict";a.put("app/dashboard/view/admin/base.html",'<div class=base><a ui-sref=dashboard.admin ng-show=not_in_base()>Back</a></div><div ui-view=box class="admin view"><p>admin panel</p></div>'),a.put("app/dashboard/view/admin/menu.html",'<ul class="menu ops"><div class=tip>1.選擇欲編輯之菜單&nbsp;<select ng-model=data.edit_role name=roles ng-options="role.name as role.name for role in user.roles"></select></div><li><div ng-click=menu_add() href="" class=btn>Add</div></li><li><div ng-click=menu_save() href="" class=btn>Save</div></li><li><div ng-click=menu_cancel_edit() href="" class=btn>Cancel</div></li></ul><div class="half edit_form"><div class=tip>2.點選左方選項編輯</div><form name=menu_item><div class=field><label>名稱</label><input ng-model=data.menu.selected.name></div><div class=field><label>圖示 (參考<a href="http://fortawesome.github.io/Font-Awesome/icons/">命名</a>)</label><input ng-model=data.menu.selected.icon></div><div class=field><label>鏈結</label><input ng-model=data.menu.selected.link></div><div class=field><label>Youtube</label><input ng-model=data.menu.selected.tube></div><div class=field><label>功能描述</label><textarea ng-model=data.menu.selected.desc></textarea></div></form></div><script type=text/ng-template id=menu_item><i ng-click="menu_mark_as_remove(this)" class="fa fa-fw fa-times"></i><i ui-tree-handle="" ng-class="{dragging: this.is_dragging }" class="fa fa-fw fa-arrows"></i><i class="fa fa-fw fa-{{node.icon}}"></i><span>{{node.name}}</span><ol ui-tree-nodes="" ng-model="node.nodes"><li ng-repeat="node in node.nodes" ui-tree-node="" ng-include="\'menu_item\'"></li></ol></script><div ui-tree=data.menuTree class="half menu_tree"><ol id=tree-root ui-tree-nodes="" data-max-depth=5 ng-model=data.menu.serv.raw><li ng-repeat="node in data.menu.serv.raw" ng-click=show_menu_item(this) ng-class="{\'node-selected\': menu_item_selected(node), \'destroy\': node.destroy}" ng-include="\'menu_item\'" ui-tree-node=""></li></ol></div>'),a.put("app/dashboard/view/admin/tasks.html","<div class=cool>Tasks</div><div class=task></div>"),a.put("app/dashboard/view/admin/users.html","<div class=cool>user panel</div><div ng-grid=userGrid class=userGrid></div>"),a.put("app/dashboard/view/base.html",'<div class=db><div class=hide><dashboard></dashboard></div><div class=wrap><header id=header><div id=title><div class="beaver avatar"><img src=/assets/images/3419cf66.beaver128.png></div><h1><a ui-sref=landing><span>Bebras&nbsp;</span><span class=full>Contest</span></a></h1><h2><a ui-sref=landing><span>國際運算思維能力測驗</span></a></h2></div><ul id=nav><li class=state><h1>{{ data.menu.clicked.name }}</h1><h2>{{ data.menu.clicked.desc }}</h2></li><li class=user><div class=name><a href=#>{{ user.name || "新海貍" }}</a></div><ul class=switches><li><a href=# ng-click=logout() class=logout>登出</a></li><li ng-show=" user.roles.length &gt; 1" class=roles><select ng-model=data.role ng-options="role.name for role in user.roles"></select></li></ul></li><li class=avatar><img src=/assets/images/d58c6515.user_nil.png></li></ul></header><div class=drow><div ui-view=menu class=wg></div><div ui-view=panel class=pan><div class=data></div></div></div></div></div>'),a.put("app/dashboard/view/com/date.html",""),a.put("app/dashboard/view/com/school_list.html",""),a.put("app/dashboard/view/com/text_input.html",""),a.put("app/dashboard/view/header.html",'<header id=header><div id=title><div class="beaver avatar"><img src=/assets/images/3419cf66.beaver128.png></div><h1><a ui-sref=landing><span>Bebras&nbsp;</span><span class=full>Contest</span></a></h1><h2><a ui-sref=landing><span>國際運算思維能力測驗</span></a></h2></div><ul id=nav><li class=state><h1>{{ data.menu.clicked.name }}</h1><h2>{{ data.menu.clicked.desc }}</h2></li><li class=user><div class=name><a href=#>{{ user.name || "新海貍" }}</a></div><ul class=switches><li><a href=# ng-click=logout() class=logout>登出</a></li><li ng-show=" user.roles.length &gt; 1" class=roles><select ng-model=data.role ng-options="role.name for role in user.roles"></select></li></ul></li><li class=avatar><img src=/assets/images/d58c6515.user_nil.png></li></ul></header>'),a.put("app/dashboard/view/manager/base.html",'<div ui-view=box class="manager view"><p>manager panel</p></div>'),a.put("app/dashboard/view/manager/bulletin.html",'<div class="panel bulletin"><ul class=ops><li><div ng-click=new_msg() class=btn>新公告</div></li></ul><div class=scroll><ul class=humplist><li ng-repeat="msg in data.msgs"><div class=item><span class=title>{{ msg.title }}</span><div class=ctrls><i ng-click=del_msg(msg) class="remove fa fa-fw fa-times"></i><i ng-click=edit_msg(msg) class="edit fa fa-fw fa-edit"></i></div></div></li></ul><div class=detail><form name=msg_form novalidate ng-show=" msg_editor_visible() " class=new_bull><div class="field half"><label for=msg_start>開始於</label><div class=datepicker><input id=msg_start date-disabled="msg_start_cal_disable(date, mode)" year-range=1 format-day-title="\'MM yyyy\'" format-month-title="\'MM yyyy\'" format-month=MMM datepicker-mode=day datepicker-popup=yyyy/MM/dd ng-model=data.msg.start_time datepicker-options=data.sdate_opt is-open=data.sdate_opt.open min-date=data.sdate_opt.minDate show-button-bar=false disabled ng-required=true><button type=button ng-click="open_calendar($event, \'sdate_opt\')" class=trigger><i class="fa fa-fw fa-calendar"></i></button></div></div><div class="field half"><label for=msg_end>結束于</label><div class=datepicker><input id=msg_end date-disabled="msg_end_cal_disable(date, mode)" year-range=1 format-day-title="\'MM yyyy\'" format-month-title="\'MM yyyy\'" format-month=MMM datepicker-mode=day datepicker-popup=yyyy/MM/dd ng-model=data.msg.end_time datepicker-options=data.edate_opt is-open=data.edate_opt.open min-date=data.edate_opt.minDate show-button-bar=false disabled ng-required=true><button type=button ng-click="open_calendar($event, \'edate_opt\')" class=trigger><i class="fa fa-fw fa-calendar"></i></button></div></div><div class="field full"><label for=msg_title>標題</label><input min=2 max=64 ng-model=data.msg.title></div><div class="field full"><label for=msg_title>內文</label><textarea ng-model=data.msg.body ckeditor=""></textarea></div><div class=btns><button ng-click=add_msg() ng-show=" data.new " class=btn>新</button><button ng-click=update_msg() ng-show=" data.edit " class=btn>改</button><button ng-click=cancel_editor() class=btn>取消</button></div></form><script src=/assets/ckeditor/ckeditor.js></script></div></div></div>'),a.put("app/dashboard/view/manager/bulletin/edit.html",'<form name=msg_form novalidate ng-show=" msg_editor_visible() " class=new_bull><div class="field half"><label for=msg_start>開始於</label><div class=datepicker><input id=msg_start date-disabled="msg_start_cal_disable(date, mode)" year-range=1 format-day-title="\'MM yyyy\'" format-month-title="\'MM yyyy\'" format-month=MMM datepicker-mode=day datepicker-popup=yyyy/MM/dd ng-model=data.msg.start_time datepicker-options=data.sdate_opt is-open=data.sdate_opt.open min-date=data.sdate_opt.minDate show-button-bar=false disabled ng-required=true><button type=button ng-click="open_calendar($event, \'sdate_opt\')" class=trigger><i class="fa fa-fw fa-calendar"></i></button></div></div><div class="field half"><label for=msg_end>結束于</label><div class=datepicker><input id=msg_end date-disabled="msg_end_cal_disable(date, mode)" year-range=1 format-day-title="\'MM yyyy\'" format-month-title="\'MM yyyy\'" format-month=MMM datepicker-mode=day datepicker-popup=yyyy/MM/dd ng-model=data.msg.end_time datepicker-options=data.edate_opt is-open=data.edate_opt.open min-date=data.edate_opt.minDate show-button-bar=false disabled ng-required=true><button type=button ng-click="open_calendar($event, \'edate_opt\')" class=trigger><i class="fa fa-fw fa-calendar"></i></button></div></div><div class="field full"><label for=msg_title>標題</label><input min=2 max=64 ng-model=data.msg.title></div><div class="field full"><label for=msg_title>內文</label><textarea ng-model=data.msg.body ckeditor=""></textarea></div><div class=btns><button ng-click=add_msg() ng-show=" data.new " class=btn>新</button><button ng-click=update_msg() ng-show=" data.edit " class=btn>改</button><button ng-click=cancel_editor() class=btn>取消</button></div></form><script src=/assets/ckeditor/ckeditor.js></script>'),a.put("app/dashboard/view/manager/bulletin/new.html",'<form name=msg_form novalidate ng-show=" msg_editor_visible() " class=new_bull><div class="field half"><label for=msg_start>開始於</label><div class=datepicker><input id=msg_start date-disabled="msg_start_cal_disable(date, mode)" year-range=1 format-day-title="\'MM yyyy\'" format-month-title="\'MM yyyy\'" format-month=MMM datepicker-mode=day datepicker-popup=yyyy/MM/dd ng-model=data.msg.start_time datepicker-options=data.sdate_opt is-open=data.sdate_opt.open min-date=data.sdate_opt.minDate show-button-bar=false disabled ng-required=true><button type=button ng-click="open_calendar($event, \'sdate_opt\')" class=trigger><i class="fa fa-fw fa-calendar"></i></button></div></div><div class="field half"><label for=msg_end>結束于</label><div class=datepicker><input id=msg_end date-disabled="msg_end_cal_disable(date, mode)" year-range=1 format-day-title="\'MM yyyy\'" format-month-title="\'MM yyyy\'" format-month=MMM datepicker-mode=day datepicker-popup=yyyy/MM/dd ng-model=data.msg.end_time datepicker-options=data.edate_opt is-open=data.edate_opt.open min-date=data.edate_opt.minDate show-button-bar=false disabled ng-required=true><button type=button ng-click="open_calendar($event, \'edate_opt\')" class=trigger><i class="fa fa-fw fa-calendar"></i></button></div></div><div class="field full"><label for=msg_title>標題</label><input min=2 max=64 ng-model=data.msg.title></div><div class="field full"><label for=msg_title>內文</label><textarea ng-model=data.msg.body ckeditor=""></textarea></div><div class=btns><button ng-click=add_msg() ng-show=" data.new " class=btn>新</button><button ng-click=update_msg() ng-show=" data.edit " class=btn>改</button><button ng-click=cancel_editor() class=btn>取消</button></div></form><script src=/assets/ckeditor/ckeditor.js></script>'),a.put("app/dashboard/view/manager/contests.html",'<div class="panel contests"><ul class=ops><li><div ui-sref=dashboard.manager.contests.new class=btn>新測驗</div></li><li>顯示:<div ng-click="show(\'info\')" class=btn>題目</div></li><li><div ng-click="show(\'misc\')" class=btn>設定</div></li></ul><div class=scroll><ul class=humplist><li ng-repeat="cn in data.contests"><div class=item><span class=title>{{ cn.name }}</span><div class=info><span>{{ cn.grading_str }}</span><span>{{ cn.sdate }} ~ {{ cn.edate}}</span></div><div class=ctrls><i ng-click=remove(cn) class="remove fa fa-fw fa-times"></i><i ng-click=edit(cn) class="edit fa fa-fw fa-edit"></i></div></div></li></ul><div ui-view=scroll class=detail>detail</div></div></div>'),a.put("app/dashboard/view/manager/contests/edit.html",'<form name=new_contest class=contest><div class="field half"><label for=name>名稱</label><input id=name ng-model=data.contest.name></div><div class="field half"><label for=grading>計分方式</label><select id=grading ng-model=data.grading ng-options="g as g.name for g in data.gradings"></select></div><div class="field half"><label for=sdate>開始日期</label><div class=datepicker><input id=sdate date-disabled="sdate_cal_disable(date, mode)" year-range=1 format-day-title="\'MM yyyy\'" format-month-title="\'MM yyyy\'" format-month=MMM datepicker-mode=day datepicker-popup=yyyy/MM/dd ng-model=data.contest.sdate datepicker-options=data.opt.sdate is-open=data.opt.sdate.open min-date=data.opt.sdate.minDate show-button-bar=false disabled ng-required=true><button type=button ng-click="open_cal($event, \'sdate\')" class=trigger><i class="fa fa-fw fa-calendar"></i></button></div></div><div class="field half"><label for=edate>結束日期</label><div class=datepicker><input id=edate date-disabled="edate_cal_disable(date, mode)" year-range=1 format-day-title="\'MM yyyy\'" format-month-title="\'MM yyyy\'" format-month=MMM datepicker-mode=day datepicker-popup=yyyy/MM/dd ng-model=data.contest.edate datepicker-options=data.opt.edate is-open=data.opt.edate.open min-date=data.opt.edate.minDate show-button-bar=false disabled ng-required=true><button type=button ng-click="open_cal($event, \'edate\')" class=trigger><i class="fa fa-fw fa-calendar"></i></button></div></div><div class=field><label for=task_ids>題目</label><div class=task_list><div class=selected><div class=tasks_info>{{ctask_info()}}</div><ul class=tasks><li ng-repeat="tsk in data.ctasks | orderBy:\'rating\'"><label ng-click=remove_ctask(tsk) class=task>{{ tsk.title }}<span class=info>{{ tsk.tid }}({{ rats(tsk.rating) }})</span><input type=checkbox></label></li></ul></div><div class=database><div class=filter><input ng-model=data.query.$ placeholder=anything></div><ul class=tasks><li ng-repeat="tsk in data.tasks | filter:data.query | orderBy:\'rating\'"><label ng-click=add_ctask(tsk) class=task>{{ tsk.title }}<span class=info>{{ tsk.tid }}({{ rats(tsk.rating) }})</span><input type=checkbox></label></li></ul></div></div></div><div class=field><div class=btns><button ng-click=save() class="btn save">儲存</button><button ng-click=cancel() class="btn cancel">取消</button></div></div></form>'),a.put("app/dashboard/view/manager/contests/list.html",'<ul class=humplist><li ng-repeat="cn in data.contests"><div class=item><span class=title>{{ cn.name }}</span><div class=info><span>{{ cn.grading_str }}</span><span>{{ cn.sdate }} ~ {{ cn.edate}}</span></div><div class=ctrls><i ng-click=remove(cn) class="remove fa fa-fw fa-times"></i><i ng-click=edit(cn) class="edit fa fa-fw fa-edit"></i></div></div></li></ul>'),a.put("app/dashboard/view/manager/contests/new.html",'<form name=new_contest class=contest><div class="field half"><label for=name>名稱</label><input id=name ng-model=data.contest.name></div><div class="field half"><label for=grading>計分方式</label><select id=grading ng-model=data.grading ng-options="g as g.name for g in data.gradings"></select></div><div class="field half"><label for=sdate>開始日期</label><div class=datepicker><input id=sdate date-disabled="sdate_cal_disable(date, mode)" year-range=1 format-day-title="\'MM yyyy\'" format-month-title="\'MM yyyy\'" format-month=MMM datepicker-mode=day datepicker-popup=yyyy/MM/dd ng-model=data.contest.sdate datepicker-options=data.opt.sdate is-open=data.opt.sdate.open min-date=data.opt.sdate.minDate show-button-bar=false disabled ng-required=true><button type=button ng-click="open_cal($event, \'sdate\')" class=trigger><i class="fa fa-fw fa-calendar"></i></button></div></div><div class="field half"><label for=edate>結束日期</label><div class=datepicker><input id=edate date-disabled="edate_cal_disable(date, mode)" year-range=1 format-day-title="\'MM yyyy\'" format-month-title="\'MM yyyy\'" format-month=MMM datepicker-mode=day datepicker-popup=yyyy/MM/dd ng-model=data.contest.edate datepicker-options=data.opt.edate is-open=data.opt.edate.open min-date=data.opt.edate.minDate show-button-bar=false disabled ng-required=true><button type=button ng-click="open_cal($event, \'edate\')" class=trigger><i class="fa fa-fw fa-calendar"></i></button></div></div><div class=field><label for=task_ids>題目</label><div class=task_list><div class=selected><div class=tasks_info>{{ctask_info()}}</div><ul class=tasks><li ng-repeat="tsk in data.ctasks | orderBy:\'rating\'"><label ng-click=remove_ctask(tsk) class=task>{{ tsk.title }}<span class=info>{{ tsk.tid }}({{ rats(tsk.rating) }})</span><input type=checkbox></label></li></ul></div><div class=database><div class=filter><input ng-model=data.query.$ placeholder=anything></div><ul class=tasks><li ng-repeat="tsk in data.tasks | filter:data.query | orderBy:\'rating\'"><label ng-click=add_ctask(tsk) class=task>{{ tsk.title }}<span class=info>{{ tsk.tid }}({{ rats(tsk.rating) }})</span><input type=checkbox></label></li></ul></div></div></div><div class=field><div class=btns><button ng-click=save() class="btn save">儲存</button><button ng-click=cancel() class="btn cancel">取消</button></div></div></form>'),a.put("app/dashboard/view/manager/files.html",'<div flow-init="{singleFile: false}" flow-file-added="file_added($file, $event)" class="panel files"><ul class=ops><li><div flow-btn="" flow-attrs="{accept:\'*/*\'}" class=btn>上傳</div></li></ul><div class=scroll><div class=detail><table><thead><tr><th>檔名</th><th>日期</th><th>大小</th><th>下載次數</th></tr></thead><tbody><tr ng-repeat="file in $flow.files"><td>{{ file.name }}</td><td>{{ file.msg }}</td><td>{{ file.date }}</td><td>-</td></tr></tbody></table></div></div></div>'),a.put("app/dashboard/view/manager/tasks.html",'<div ui-view=scroll class="panel tasks"><ul class=ops><li><div ui-sref=dashboard.manager.tasks.new class=btn>新增</div></li><li><div class=field><input placeholder=題目年份查詢 ng-model=data.query></div></li><li>顯示:<div ng-click="show(\'info\')" class=btn>題目</div></li><li><div ng-click="show(\'misc\')" class=btn>設定</div></li></ul><div class=scroll><ul ng-class="{\'no-data\': data.tasks.length == 0}" class=humplist><li ng-repeat="tsk in data.tasks"><div ng-mouseenter=hover_tsk(tsk) ng-class=clicked_tsk(tsk) ng-click=click_tsk(tsk) class=item><span class=title>{{ tsk.title }}</span><span class=date>{{ tsk.year }}</span><div class=ctrls><i ng-click=remove(tsk) class="remove fa fa-fw fa-times"></i><i ng-click=edit(tsk) class="edit fa fa-fw fa-edit"></i></div></div></li></ul><div class=detail><div ng-show="data.hovered || data.show == \'misc\'" class=hovered><div class=klasses><h3>題目類別</h3><div ng-class="{\'no-data\': data.task.klasses == 0}" class=k></div><span ng-repeat="kls in data.task.klasses" class=klass><div class="fa fa-fw fa-bookmark"></div>{{ kls.text }}</span></div><table class=ratings><caption>難度</caption><thead><tr><th>來源</th><th>Beaver</th><th>Benjamin</th><th>Cadet</th><th>Junior</th><th>Senior</th></tr></thead><tbody><tr ng-show="data.task.official_ratings.length &gt; 0"><td>官方</td><td ng-repeat="rating in data.task.official_ratings" ng-class="{\'no-data\': rating.value == 0}" class=rating><i ng-repeat="s in range(rating.value)" class="fa fa-fw fa-star"></i></td></tr></tbody></table></div><div ng-show="data.clicked &amp;&amp; data.show == \'info\'" class=clicked><div class="field tbody">題文<div ng-bind-html=data.task.body class=content></div></div><div class="field quest">題問<div ng-bind-html=data.task.quest class=content></div></div><ol class="field choices">參考選項<li ng-repeat="cho in data.task.choices" ng-class="{answer: cho.answer}" class=choice><div ng-bind-html=cho.content class=content></div></li></ol></div></div></div></div>'),a.put("app/dashboard/view/manager/tasks/clicked.html",'<div ng-show="data.clicked &amp;&amp; data.show == \'info\'" class=clicked><div class="field tbody">題文<div ng-bind-html=data.task.body class=content></div></div><div class="field quest">題問<div ng-bind-html=data.task.quest class=content></div></div><ol class="field choices">參考選項<li ng-repeat="cho in data.task.choices" ng-class="{answer: cho.answer}" class=choice><div ng-bind-html=cho.content class=content></div></li></ol></div>'),a.put("app/dashboard/view/manager/tasks/edit.html",'<ul class=tabs><li ng-repeat="tab in data.tabs" ng-class=is_tab_clicked(tab) class=tab><a ng-click=tab_click(tab)>{{ tab.name }}</a></li></ul><div class=pad><form name=basic_form ng-show="clicked(\'basic\')" class=task><div class=field><label>標題</label><input ng-model=data.task.title></div><div class="field half"><label>ID</label><input ng-model=data.task.tid></div><div class="field half"><label>類別</label><tags-input type=text ng-model=data.task.klasses></tags-input></div><div class="field half"><label>開放於</label><span>(demo, contest, teacher, landing)</span><tags-input type=text ng-model=data.task.opens></tags-input></div><div class="field half"><label>關鍵字</label><tags-input type=text ng-model=data.task.keywords></tags-input></div><div class="field half"><label>難度</label><div ng-repeat="lvl in data.task.ratings" class=rating><label>{{ lvl.key }}</label><span>({{ rating_text(lvl) }})</span><rating ng-model=lvl.value max=3 state-on="\'fa-star\'" state-off="\'fa-star-o\'" on-hover=hovering_rating(lvl) on-leave="overStar = null"></rating><a href="" ng-click=unset_rating(lvl) class="fa fa-fw fa-times unset"></a></div></div></form><form name=body_form ng-show="clicked(\'body\')" class=task><div class=field><label>題文</label><textarea ng-model=data.task.body ckeditor=""></textarea></div><div class=field><label>題問</label><textarea ng-model=data.task.quest ckeditor=""></textarea></div></form><form name=choices_form ng-show="clicked(\'choices\')" class=task><div ng-repeat="cho in data.task.choices" class=field><label ng-click=mark_answer(cho) ng-class="{answer: cho.answer}" class=choice>選項{{ cho.index }}</label><textarea ng-model=cho.content ckeditor=""></textarea></div></form><form name=info_form ng-show="clicked(\'info\')" class=task><div class=field><label>詳解</label><textarea ng-model=data.task.explain ckeditor=""></textarea></div><div class=field><label>花在資訊學科的意義</label><textarea ng-model=data.task.info ckeditor=""></textarea></div></form><div name=misc_form ng-show="clicked(\'misc\')" class=info><pre>{{ json_size() }}</pre></div><div class=btns><div class=btn><a ng-click=save_task()>save</a></div><div class=btn><a ng-click=cancel()>cancel</a></div></div></div><script src=/assets/ckeditor/ckeditor.js></script>'),a.put("app/dashboard/view/manager/tasks/form/basic.html",""),a.put("app/dashboard/view/manager/tasks/hovered.html",'<div ng-show="data.hovered || data.show == \'misc\'" class=hovered><div class=klasses><h3>題目類別</h3><div ng-class="{\'no-data\': data.task.klasses == 0}" class=k></div><span ng-repeat="kls in data.task.klasses" class=klass><div class="fa fa-fw fa-bookmark"></div>{{ kls.text }}</span></div><table class=ratings><caption>難度</caption><thead><tr><th>來源</th><th>Beaver</th><th>Benjamin</th><th>Cadet</th><th>Junior</th><th>Senior</th></tr></thead><tbody><tr ng-show="data.task.official_ratings.length &gt; 0"><td>官方</td><td ng-repeat="rating in data.task.official_ratings" ng-class="{\'no-data\': rating.value == 0}" class=rating><i ng-repeat="s in range(rating.value)" class="fa fa-fw fa-star"></i></td></tr></tbody></table></div>'),a.put("app/dashboard/view/manager/tasks/list.html",'<ul ng-class="{\'no-data\': data.tasks.length == 0}" class=humplist><li ng-repeat="tsk in data.tasks"><div ng-mouseenter=hover_tsk(tsk) ng-class=clicked_tsk(tsk) ng-click=click_tsk(tsk) class=item><span class=title>{{ tsk.title }}</span><span class=date>{{ tsk.year }}</span><div class=ctrls><i ng-click=remove(tsk) class="remove fa fa-fw fa-times"></i><i ng-click=edit(tsk) class="edit fa fa-fw fa-edit"></i></div></div></li></ul>'),a.put("app/dashboard/view/manager/tasks/new.html",'<ul class=tabs><li ng-repeat="tab in data.tabs" ng-class=is_tab_clicked(tab) class=tab><a ng-click=tab_click(tab)>{{ tab.name }}</a></li></ul><div class=pad><form name=basic_form ng-show="clicked(\'basic\')" class=task><div class=field><label>標題</label><input ng-model=data.task.title></div><div class="field half"><label>ID</label><input ng-model=data.task.tid></div><div class="field half"><label>類別</label><tags-input type=text ng-model=data.task.klasses></tags-input></div><div class="field half"><label>開放於</label><span>(demo, contest, teacher, landing)</span><tags-input type=text ng-model=data.task.opens></tags-input></div><div class="field half"><label>關鍵字</label><tags-input type=text ng-model=data.task.keywords></tags-input></div><div class="field half"><label>難度</label><div ng-repeat="lvl in data.task.ratings" class=rating><label>{{ lvl.key }}</label><span>({{ rating_text(lvl) }})</span><rating ng-model=lvl.value max=3 state-on="\'fa-star\'" state-off="\'fa-star-o\'" on-hover=hovering_rating(lvl) on-leave="overStar = null"></rating><a href="" ng-click=unset_rating(lvl) class="fa fa-fw fa-times unset"></a></div></div></form><form name=body_form ng-show="clicked(\'body\')" class=task><div class=field><label>題文</label><textarea ng-model=data.task.body ckeditor=""></textarea></div><div class=field><label>題問</label><textarea ng-model=data.task.quest ckeditor=""></textarea></div></form><form name=choices_form ng-show="clicked(\'choices\')" class=task><div ng-repeat="cho in data.task.choices" class=field><label ng-click=mark_answer(cho) ng-class="{answer: cho.answer}" class=choice>選項{{ cho.index }}</label><textarea ng-model=cho.content ckeditor=""></textarea></div></form><form name=info_form ng-show="clicked(\'info\')" class=task><div class=field><label>詳解</label><textarea ng-model=data.task.explain ckeditor=""></textarea></div><div class=field><label>花在資訊學科的意義</label><textarea ng-model=data.task.info ckeditor=""></textarea></div></form><div name=misc_form ng-show="clicked(\'misc\')" class=info><pre>{{ json_size() }}</pre></div><div class=btns><div class=btn><a ng-click=save_task()>save</a></div><div class=btn><a ng-click=cancel()>cancel</a></div></div></div><script src=/assets/ckeditor/ckeditor.js></script>'),a.put("app/dashboard/view/manager/users.html",'<div class=bar><ul class="users ops"><li><div ng-click="load_user(\'teacher_applicant\')" class=btn>新教師</div></li><li><div ng-click="load_user(\'teacher\')" class=btn>教師們</div></li><li><div ng-click="load_user(\'student\')" class=btn>學生們</div></li></ul><div class="users pager"><pagination boundary-links=true max_page=data.pager.max_page total-items=data.pager.total ng-model=data.pager.page items-per-page=data.pager.per_page max-size=5 previous-text=‹ next-text=› first-text=« last-text=»></pagination><div class=per><select ng-model=data.pager.per_page><option>50</option><option>30</option><option>10</option></select></div></div></div><div class="users scroll"><ul class=list><div ng-show="data.users.length == 0" class=nodata>{{ is_loading() }}</div><li ng-repeat="u in data.users"><div ng-class=user_style(u) class=user><div ng-show="list_mod == \'ta\'" ng-click=mark_teacher(u) class=check><i class="fa fa-fw fa-check-circle"></i></div><div class=field><div class=school>{{ u.school }}</div><div class=name>{{ u.name }}</div><div class=phone>{{u.phone}}</div></div><div class=controls><div class=groups></div></div></div></li></ul><div class=detail>more</div></div>'),a.put("app/dashboard/view/menu.html",'<ul class=menu><li ng-repeat="item in data.menu" ng-class="{clicked: item == clicked}"><a ng-click=menu_click(item) href=""><span title={{item.desc}}>{{ item.name }}</span><i class="fa fa-fw fa-{{item.icon}}"></i></a></li></ul>'),a.put("app/dashboard/view/student/base.html","<h1>studnet panel {{message}}</h1>"),a.put("app/dashboard/view/teacher/base.html",'<!-- teacher panel--><div ui-view=box class="teacher view"></div>'),a.put("app/dashboard/view/teacher/form/new_group.html",'<div ng-show=" data.groups.new || data.groups.edit " class=new_group><form novalidate name=new_group><div class="field half"><label for=group_grade>年級</label><input id=group_grade ng-model=data.groups.form_group.grade ng-class="{\'error\': form_invalid(new_group.group_grade)}" ng-required=true type=number name=group_grade min=1 max=16><p class=error><span ng-show=new_group.group_grade.$error.required>不可空白</span><span ng-show=new_group.group_grade.$error.min>值需大於1</span><span ng-show=new_group.group_grade.$error.max>值需小於12</span></p></div><div class="field half"><label for=group_cluster>班級類別</label><select id=group_cluster ng-model=data.groups.form_group.cluster name=cluster ng-class="{\'error\': form_invalid(new_group.cluster)}" ng-options="k as k.name for k in data.groups.clusters" ng-required=true><option value="">-- 請選擇班級 --</option></select><p class=error><span ng-show="new_group.cluster.$error.required &amp;&amp; !new_group.cluster.$pristine">班級屬性為必選</span></p></div><div class="field half"><label for=group_name>班級名稱</label><input id=group_name ng-model=data.groups.form_group.name name=group_name ng-class="{\'error\': form_invalid(new_group.group_name)}" ng-required=true ng-maxlength=10><p class=error><span ng-show="new_group.group_name.$error.required &amp;&amp; !new_group.group_name.$pristine">不可空白</span><span ng-show="new_group.group_name.$error.maxlength &amp;&amp; !new_group.group_name.$pristine">不可超過10個字</span></p></div><div class="field half"><label for=group_extime>其他註記</label><input id=group_note ng-model=data.groups.form_group.note placeholder=選填 ng-maxlength=255></div><div class="field desc">預計測驗時程</div><div class="field half"><label for=group_exdate>日期</label><div class=datepicker><input id=group_exdate date-disabled="group_exdate_cal_disable(date, mode)" year-range=1 format-day-title="\'MM yyyy\'" format-month-title="\'MM yyyy\'" format-month=MMM datepicker-mode=day datepicker-popup=yyyy/MM/dd ng-model=data.groups.form_group.exdate datepicker-options=data.groups.exdate_opt is-open=data.groups.exdate_opt.open min-date=data.groups.exdate_opt.minDate show-button-bar=false disabled ng-required=true><button type=button ng-click=open_calendar($event) class=trigger><i class="fa fa-fw fa-calendar"></i></button></div></div><div class="field half"><label for=group_extime>時段</label><select id=group_extime ng-model=data.groups.form_group.extime ng-options="k as k.name for k in data.groups.time_sec" ng-required=true></select></div><div class=controls><button ng-click=group_add(new_group) ng-show=" data.groups.new " ng-disabled=cant_add_group(new_group) class=btn>新增</button><button ng-click=group_update(new_group) ng-show=" data.groups.edit " ng-disabled=cant_update_group(new_group) class=btn>更新</button><button ng-click=group_new_cancel() class=btn>取消</button></div></form></div>'),a.put("app/dashboard/view/teacher/groups.html",'<div ui-view=scroll class=details><div class=ops><ul><li><div ng-click=group_new() class=btn>1.新增班級</div></li><li><div class=tip>請注意，學生經首頁註冊並加入班級後，始完成報名</div></li></ul></div><div ng-show=" data.groups.new || data.groups.edit " class=new_group><form novalidate name=new_group><div class="field half"><label for=group_grade>年級</label><input id=group_grade ng-model=data.groups.form_group.grade ng-class="{\'error\': form_invalid(new_group.group_grade)}" ng-required=true type=number name=group_grade min=1 max=16><p class=error><span ng-show=new_group.group_grade.$error.required>不可空白</span><span ng-show=new_group.group_grade.$error.min>值需大於1</span><span ng-show=new_group.group_grade.$error.max>值需小於12</span></p></div><div class="field half"><label for=group_cluster>班級類別</label><select id=group_cluster ng-model=data.groups.form_group.cluster name=cluster ng-class="{\'error\': form_invalid(new_group.cluster)}" ng-options="k as k.name for k in data.groups.clusters" ng-required=true><option value="">-- 請選擇班級 --</option></select><p class=error><span ng-show="new_group.cluster.$error.required &amp;&amp; !new_group.cluster.$pristine">班級屬性為必選</span></p></div><div class="field half"><label for=group_name>班級名稱</label><input id=group_name ng-model=data.groups.form_group.name name=group_name ng-class="{\'error\': form_invalid(new_group.group_name)}" ng-required=true ng-maxlength=10><p class=error><span ng-show="new_group.group_name.$error.required &amp;&amp; !new_group.group_name.$pristine">不可空白</span><span ng-show="new_group.group_name.$error.maxlength &amp;&amp; !new_group.group_name.$pristine">不可超過10個字</span></p></div><div class="field half"><label for=group_extime>其他註記</label><input id=group_note ng-model=data.groups.form_group.note placeholder=選填 ng-maxlength=255></div><div class="field desc">預計測驗時程</div><div class="field half"><label for=group_exdate>日期</label><div class=datepicker><input id=group_exdate date-disabled="group_exdate_cal_disable(date, mode)" year-range=1 format-day-title="\'MM yyyy\'" format-month-title="\'MM yyyy\'" format-month=MMM datepicker-mode=day datepicker-popup=yyyy/MM/dd ng-model=data.groups.form_group.exdate datepicker-options=data.groups.exdate_opt is-open=data.groups.exdate_opt.open min-date=data.groups.exdate_opt.minDate show-button-bar=false disabled ng-required=true><button type=button ng-click=open_calendar($event) class=trigger><i class="fa fa-fw fa-calendar"></i></button></div></div><div class="field half"><label for=group_extime>時段</label><select id=group_extime ng-model=data.groups.form_group.extime ng-options="k as k.name for k in data.groups.time_sec" ng-required=true></select></div><div class=controls><button ng-click=group_add(new_group) ng-show=" data.groups.new " ng-disabled=cant_add_group(new_group) class=btn>新增</button><button ng-click=group_update(new_group) ng-show=" data.groups.edit " ng-disabled=cant_update_group(new_group) class=btn>更新</button><button ng-click=group_new_cancel() class=btn>取消</button></div></form></div><ul id=groups><li ng-repeat="gp in data.groups.list"><div class=group><div class=btns><div ui-sref="dashboard.teacher.groups.enrollments({id: gp.id})" class="upload btn"><i class="fa fa-fw fa-users"></i><span>2.學生名單</span></div></div><div class=info><div class=grade>{{ gp.grade }} 年級</div><div class=name>{{ gp.name }} 班 ({{ cluster_str(gp.cluster_id) }})</div><div class=gcode>班級代碼: {{ gp.gcode }}</div><div class=exdate>預計施測時間: {{ gp.exdate }} {{ extime_str(gp.extime) }}</div></div><div class=controls><div ng-click=del_group(gp) class="fa fa-fw fa-times-circle delete"></div><div ng-click=edit_group(gp) class="fa fa-fw fa-pencil edit"></div></div></div></li></ul></div>'),a.put("app/dashboard/view/teacher/groups/enrollments.html",'<ul flow-init="{singleFile: true}" flow-file-added="file_added($file, $event)" class="ops flow"><li><div ng-click=new_enrollment() class=btn>單筆新增</div></li><li><div ng-click=save_edited() class=btn>儲存編輯</div></li><li><div flow-btn="" flow-attrs="{accept:\'.csv,application/csv,text/csv\'}" class=btn>匯入學生資料</div></li><li><div ng-repeat="file in $flow.files" class=files><div class=status><div class=name>{{file.name}}</div><div class=msg>{{file.msg}}</div></div></div></li><li><div class=tip>資料為*.csv格式（無表頭)，請參考<a href=http://bebras01.csie.ntnu.edu.tw:88/system/st_template.csv class=template>此範本</a>填入資料上傳</div></li><li><div class=tip>學生預設密碼為<b>"學號"</b></div></li></ul><div class=students><table><thead><tr><th ng-repeat="col in data.cols"><i ng-class=sort_status(col) ng-click=sort_by(col) class="sort fa fa-fw"></i>{{col.name}}</th><th ng-show="data.users.length &gt; 0"><button ng-click=delete_checked() class=btn>刪除</button><input type=checkbox ng-model=check_all></th></tr></thead><tbody><tr ng-show=" data.users.length == 0 "><td colspan={{data.cols.length}}>沒有資料</td></tr><tr ng-repeat=" sv in data.users | orderBy: precs() "><td ng-class="{error: sv.error.name}"><a href="" buttons=no editable-text=sv.name onaftersave=make_dirty(sv)>{{ sv.name || "no name" }}</a></td><td ng-class="{error: sv.error.gender}"><a href="" buttons=no editable-text=sv.gender onaftersave=make_dirty(sv)>{{ sv.gender || "no name" }}</a></td><td ng-class="{error: sv.error.suid}"><a href="" buttons=no editable-text=sv.suid onaftersave=make_dirty(sv)>{{ sv.suid || "no name" }}</a></td><td ng-class="{error: sv.error.seat}"><a href="" buttons=no editable-text=sv.seat onaftersave=make_dirty(sv)>{{ sv.seat || "no name" }}</a></td><td ng-class="{error: sv.error.status.name}"><span ng-class=sv.status.value class=status>{{ sv.status.name }}</span></td><td><input type=checkbox ng-hide=" sv.status.value != \'added\' " checklist-model=data.del_users checklist-value=svid(sv)></td></tr></tbody></table></div>'),a.put("app/dashboard/view/teacher/groups/group_list.html",'<ul id=groups><li ng-repeat="gp in data.groups.list"><div class=group><div class=btns><div ui-sref="dashboard.teacher.groups.enrollments({id: gp.id})" class="upload btn"><i class="fa fa-fw fa-users"></i><span>2.學生名單</span></div></div><div class=info><div class=grade>{{ gp.grade }} 年級</div><div class=name>{{ gp.name }} 班 ({{ cluster_str(gp.cluster_id) }})</div><div class=gcode>班級代碼: {{ gp.gcode }}</div><div class=exdate>預計施測時間: {{ gp.exdate }} {{ extime_str(gp.extime) }}</div></div><div class=controls><div ng-click=del_group(gp) class="fa fa-fw fa-times-circle delete"></div><div ng-click=edit_group(gp) class="fa fa-fw fa-pencil edit"></div></div></div></li></ul>'),a.put("app/dashboard/view/teacher/personal.html",'<div class="teacher personal"><div class=field><label>姓名 {{ user.name }}</label></div><div class=field><label>學校 {{ user.school }}</label></div></div>'),a.put("app/dashboard/view/user/base.html",'<div ui-view=box class="user view"></div>'),a.put("app/dashboard/view/user/groups.html",'<ul class=ops><li><div ng-click=join_grp(join_group) class=btn>加入班級</div></li></ul><form ng-show=" join_form_visible() " name=join_group novalidate class=join_group><div class=field><label for=school>學校<i ng-show=loadingSclist class="fa fa-fw fa-spin fa-compass loading"></i></label><input id=school name=moeid typeahead="sc as sc.name for sc in get_school_list($viewValue)" typeahead-persistent=0 typeahead-loading=loadingSclist typeahead-on-select="set_moeid($item, $model, $label)" typeahead-wait-ms=10 placeholder=選擇學校 ng-required=true ng-class="{error: field_not_set(\'moeid\', join_group)}" ng-model=school><p ng-show="field_not_set(\'moeid\', join_group)" class=error><span>必填欄位(請從清單中選擇學校)</span></p></div><div class=field><label for=suid>學號</label><input id=suid name=suid placeholder=請輸入學號 required ng-model=data.join.form.suid ng-class="{error: field_not_set(\'suid\', join_group)}"><p ng-show="field_not_set(\'suid\', join_group)" class=error><span>必填欄位</span></p></div><div class=field><label for=gcode>班級代碼</label><input id=suid name=gcode placeholder=請輸入班級代碼 required ng-model=data.join.form.gcode ng-class="{error: field_not_set(\'gcode\', join_group)}"><p ng-show="field_not_set(\'gcode\', join_group)" class=error><span>必填欄位</span></p></div><div class=btns><button sabled=join_group.$invalid ng-click=join(join_group) class=btn>加入</button><button ng-click=cancel(join_group) class=btn>取消</button></div></form><ul class=groups></ul>'),a.put("app/landing/landing.html",'<div id=ltop class=landing><div class=header><div class=power><div ng-show="" class=hide>Powered By National Taiwan Normal University Department of Computer Science and Information Engineering</div><h1>Bebras</h1><h2><span>國</span><span>際</span><span>運</span><span>算</span><span>思</span><span>維</span><span>能</span><span>力</span><span>測</span><span>驗</span></h2></div><ul id=landing_nav du-spy-context="" ng-hide=dim_bg()><li du-scrollspy=ltop class=head><a du-smooth-scroll=du-smooth-scroll duration=1000 href=#ltop><img src=/assets/images/3419cf66.beaver128.png></a></li><li du-scrollspy=body><a du-smooth-scroll="" duration=1000 href=#body>測驗介紹</a></li><li du-scrollspy=subject><a du-smooth-scroll="" duration=1000 href=#subject>測驗目標</a></li><li du-scrollspy=target><a du-smooth-scroll="" duration=1000 href=#target>測驗對象</a></li><li du-scrollspy=contest><a du-smooth-scroll="" duration=1000 href=#contest>測驗方式</a></li><li ng-show=loggedin()><a ui-sref=dashboard.user>測驗平台</a></li><li><a ng-show=!loggedin() ui-sref=session.login>登入<i class="fa fa-flash"></i></a><a ng-show=loggedin() ng-click=logout() href=#>登出<i class="fa fa-coffee"></i></a></li></ul><div ui-view=control ng-class="{dim: dim_bg()}" class=control></div><ul class=msgs><li ng-repeat="msg in data.msgc.msgs"><div class=title>{{msg.title}}</div><p ng-bind-html=trust(msg.body)></p></li></ul></div><div id=body ng-class="{dim: dim_bg()}" class=body><div id=intro class=intro><ul class=articles><li id=about class=article><article><h2>關於Bebras</h2><p>Bebras測驗是一個針對8至18歲（三年級至十二年級）學生的國際資訊潛能測驗，每年於11月中的國際Bebras週（World-Wide Bebras Week）舉行。此測驗的目的旨在激起學生對於資訊學科之興趣，同時了解學生是否俱備學習資訊科學之性向。本測驗利用淺顯易懂的方式呈現題目（tasks），各題皆以情境式的任務呈現，讓學習者利用自己既有的知識進行解題。 Bebras測驗於2004年首次舉行；至2012年止，共有21國的學生參與此測驗，總計超過500,000名學生。臺灣於2012年始加入Bebras測驗。首年加入，參與學生數便為亞洲之冠，且廣受師生好評。 每年年中舉辦的Bebras 研討會，廣邀世界各地的資訊科學學者，研議新題目，並分享該國實施Bebras的成果。研討會結束後，便將編修完成的題目納入Bebras題庫中國際Bebras委員會期望透過此測驗的推廣，增進學校資訊學科之教授及學習品質。</p></article></li><li id=subject class=article><article><h2>測驗目標</h2><p>激發學生對資訊科學之學習興趣 Bebras測驗的目的除了瞭解學生是否俱備學習資訊科學之性向，更希望對學生介紹資訊科學或資訊教育的基本概念，激發他們的學習興趣。利用情境式的題型，讓學生瞭解生活中隨處可見資訊科學概念之運用；而解謎推理的題目述敘方式，更可以提升學生思考動機，並增進學生深層思考的能力。 提升學生利用資訊方法解決問題之能力 Bebras測驗題目包含家庭生活、團體合作、工作情境等。測驗內容多樣化，希望透過題目讓學生了解資訊科學概念在生活中隨處可見，而生活中的許多問題都能透過資訊科學之概念解決。 降低學生對資訊科學之恐懼 Bebras測驗透過巧思，將題目以生活化的方式呈現，讓抽象的資訊科學題目具體化，以日常生活中會碰到的問題呈現，使未曾受過資訊科學教育的學生亦能利用邏輯、推理、運算等能力解題。另一方面，Bebras題目呈現有趣且生動，不論學生是否曾受過資訊科學的訓練，都可以降低其對資訊科學的懼怕感。</p></article></li><li id=target class=article><article><h2>測驗對象</h2><p>Bebras測驗每年於11月施測一次，受測學生並無特定資格限制 ，凡是三年級至十二年級之在學學生（年紀約8至18歲），皆能 參與。受測學生依年齡分為五組，分別為：Little Beaver、Benjamin、Cadet、Junior及Senior組。每組考題又分難、中、易三種等級。</p></article></li><li id=contest class=article><article><h2>測驗方式</h2><p>測驗以班級為參加單位，利用測驗當週中的一堂課，在學校內即可完成施測。測驗中，學生必須解一連串的題目（task），每一題約耗時三分鐘，每次測驗15題，故測驗時間約45分鐘。 測驗規定學生只能用電腦作答，學生不可利用紙筆解題；因此測驗時須在電腦教室完成，且每一位學生皆備有一台作答電腦。目前全球共有六個不同進行Bebras測驗的系統；臺灣目前使用線上測驗方式，不需額外安裝任何軟體，只要有網路連線即可透過瀏覽器進行測驗。 本測驗的題目設定讓學生可於三分鐘左右完成，題庫中之題型包含單一選擇題、開放作答題、或互動題。互動題即測驗題目中包含的物件可供學生以電腦操作，以利思考；待學生找出答案後，再選擇正確的選項。 每一個年齡組的題目皆包含難、中及易三個難度。每一難度的給分不同，且題目答錯皆會倒扣。因有倒扣計分，避免負分的情形，每次測驗的起始分數為所有倒扣分數的總和，例如：臺灣今年正式測驗的起始分數為60分，滿分為300分，最低分為0分。每次測驗將遴選適合該年齡組的題目，難、中、易各佔總測驗的三分之一。</p></article></li></ul></div><footer class=footer>2014 &copy; Bebras Taiwan<br><div class=power>Powered by<ul><li><a href=http://www.ntnu.edu.tw><img src=/assets/images/ac94925d.ntnu_sd_bebras.png><label>NTNU</label></a></li><li><a href=http://www.csie.ntnu.edu.tw><img src=/assets/images/e09795e0.ntnu_csie.png><label>NTNU-CSIE</label></a></li></ul></div></footer></div></div>'),a.put("app/landing/root.html","<div ng-show=data.menu.tube.visible ng-click=toggle_menu_video() class=tube><div id=tubebed class=embed><youtube-video id=tube player=data.menu.tube.player video-id=\"data.menu.clicked.tube || ''\" player-vars=data.menu.tube.vars></youtube-video></div></div><div ui-view=main class=root></div>"),a.put("app/landing/view/intro.html","<div id=intro class=intro><ul class=articles><li id=about class=article><article><h2>關於Bebras</h2><p>Bebras測驗是一個針對8至18歲（三年級至十二年級）學生的國際資訊潛能測驗，每年於11月中的國際Bebras週（World-Wide Bebras Week）舉行。此測驗的目的旨在激起學生對於資訊學科之興趣，同時了解學生是否俱備學習資訊科學之性向。本測驗利用淺顯易懂的方式呈現題目（tasks），各題皆以情境式的任務呈現，讓學習者利用自己既有的知識進行解題。 Bebras測驗於2004年首次舉行；至2012年止，共有21國的學生參與此測驗，總計超過500,000名學生。臺灣於2012年始加入Bebras測驗。首年加入，參與學生數便為亞洲之冠，且廣受師生好評。 每年年中舉辦的Bebras 研討會，廣邀世界各地的資訊科學學者，研議新題目，並分享該國實施Bebras的成果。研討會結束後，便將編修完成的題目納入Bebras題庫中國際Bebras委員會期望透過此測驗的推廣，增進學校資訊學科之教授及學習品質。</p></article></li><li id=subject class=article><article><h2>測驗目標</h2><p>激發學生對資訊科學之學習興趣 Bebras測驗的目的除了瞭解學生是否俱備學習資訊科學之性向，更希望對學生介紹資訊科學或資訊教育的基本概念，激發他們的學習興趣。利用情境式的題型，讓學生瞭解生活中隨處可見資訊科學概念之運用；而解謎推理的題目述敘方式，更可以提升學生思考動機，並增進學生深層思考的能力。 提升學生利用資訊方法解決問題之能力 Bebras測驗題目包含家庭生活、團體合作、工作情境等。測驗內容多樣化，希望透過題目讓學生了解資訊科學概念在生活中隨處可見，而生活中的許多問題都能透過資訊科學之概念解決。 降低學生對資訊科學之恐懼 Bebras測驗透過巧思，將題目以生活化的方式呈現，讓抽象的資訊科學題目具體化，以日常生活中會碰到的問題呈現，使未曾受過資訊科學教育的學生亦能利用邏輯、推理、運算等能力解題。另一方面，Bebras題目呈現有趣且生動，不論學生是否曾受過資訊科學的訓練，都可以降低其對資訊科學的懼怕感。</p></article></li><li id=target class=article><article><h2>測驗對象</h2><p>Bebras測驗每年於11月施測一次，受測學生並無特定資格限制 ，凡是三年級至十二年級之在學學生（年紀約8至18歲），皆能 參與。受測學生依年齡分為五組，分別為：Little Beaver、Benjamin、Cadet、Junior及Senior組。每組考題又分難、中、易三種等級。</p></article></li><li id=contest class=article><article><h2>測驗方式</h2><p>測驗以班級為參加單位，利用測驗當週中的一堂課，在學校內即可完成施測。測驗中，學生必須解一連串的題目（task），每一題約耗時三分鐘，每次測驗15題，故測驗時間約45分鐘。 測驗規定學生只能用電腦作答，學生不可利用紙筆解題；因此測驗時須在電腦教室完成，且每一位學生皆備有一台作答電腦。目前全球共有六個不同進行Bebras測驗的系統；臺灣目前使用線上測驗方式，不需額外安裝任何軟體，只要有網路連線即可透過瀏覽器進行測驗。 本測驗的題目設定讓學生可於三分鐘左右完成，題庫中之題型包含單一選擇題、開放作答題、或互動題。互動題即測驗題目中包含的物件可供學生以電腦操作，以利思考；待學生找出答案後，再選擇正確的選項。 每一個年齡組的題目皆包含難、中及易三個難度。每一難度的給分不同，且題目答錯皆會倒扣。因有倒扣計分，避免負分的情形，每次測驗的起始分數為所有倒扣分數的總和，例如：臺灣今年正式測驗的起始分數為60分，滿分為300分，最低分為0分。每次測驗將遴選適合該年齡組的題目，難、中、易各佔總測驗的三分之一。</p></article></li></ul></div>"),a.put("app/landing/view/nav.html",'<ul id=landing_nav du-spy-context="" ng-hide=dim_bg()><li du-scrollspy=ltop class=head><a du-smooth-scroll=du-smooth-scroll duration=1000 href=#ltop><img src=/assets/images/3419cf66.beaver128.png></a></li><li du-scrollspy=body><a du-smooth-scroll="" duration=1000 href=#body>測驗介紹</a></li><li du-scrollspy=subject><a du-smooth-scroll="" duration=1000 href=#subject>測驗目標</a></li><li du-scrollspy=target><a du-smooth-scroll="" duration=1000 href=#target>測驗對象</a></li><li du-scrollspy=contest><a du-smooth-scroll="" duration=1000 href=#contest>測驗方式</a></li><li ng-show=loggedin()><a ui-sref=dashboard.user>測驗平台</a></li><li><a ng-show=!loggedin() ui-sref=session.login>登入<i class="fa fa-flash"></i></a><a ng-show=loggedin() ng-click=logout() href=#>登出<i class="fa fa-coffee"></i></a></li></ul>'),a.put("app/task/task.html",'<div class=task><div class=heading><div class=header><select ng-model=task_token ng-options="task.name for task in task_list"><option value="">-- 選擇題目 --</option></select></div><div class=title>2014<a ui-sref=landing>國際Bebras測驗</a></div></div><div class=view><div class=contents><div class=date>題目年份：{{ cur_task.year }}</div><div class=body>題文：<span ng-bind-html=cur_task.body></span></div><div class=quest>問題：<span ng-bind-html=cur_task.quest></span></div></div></div></div>'),a.put("components/form/session/login.html",'<form id=login name=loginform novalidate><!--+school_ta(fn, false)--><label for=login_alias>帳號</label><input id=login_alias name=login_alias placeholder=Email ng-required=true ng-model=form.login_alias ng-class="{error: loginform.login_alias.$invalid &amp;&amp; !loginform.login_alias.$pristine}" ng-minlength=5 ng-maxlength=32><p ng-show="loginform.login_alias.$invalid &amp;&amp; !loginform.login_alias.$pristine" class=error>帳號格式錯誤</p><label for=password>密碼</label><input type=password placeholder=# name=password ng-required=true ng-model=form.password ng-class="{error: loginform.password.$invalid &amp;&amp; !loginform.password.$pristine}" ng-minlength=8 ng-maxlength=32 class=password><p class=error><span ng-show="loginform.password.$invalid &amp;&amp; !loginform.password.$pristine">密碼至少8個字</span></p><button type=submit ng-disabled=!loginable(loginform) ng-click=login(loginform) class=btn>登入</button><ul class=login><li><button ng-click="auth(\'facebook\')" ng-disabled=form.submitted class="btn facebook">Facebook</button></li><li><button ng-click="auth(\'google\')" ng-disabled=form.submitted class="btn gplus">Google</button></li></ul><ul><li><a ng-click=aquire_new_pw()>重設密碼</a></li><li><a ui-sref=session.register>註冊</a></li><li><a ui-sref=landing>返回</a></li></ul></form>'),a.put("components/form/session/mixin/email.html",""),a.put("components/form/session/mixin/login_alias.html",""),a.put("components/form/session/mixin/name.html",""),a.put("components/form/session/mixin/password.html",""),a.put("components/form/session/mixin/phone.html",""),a.put("components/form/session/mixin/school_typeahead.html",""),a.put("components/form/session/pw_reset.html",'<form id=reset name=resetform><label for=password>密碼</label><input type=password placeholder=# name=password ng-required=true ng-model=form.password ng-class="{error: resetform.password.$invalid &amp;&amp; !resetform.password.$pristine}" ng-minlength=8 ng-maxlength=32 class=password><p class=error><span ng-show="resetform.password.$invalid &amp;&amp; !resetform.password.$pristine">密碼至少8個字</span></p><label for=password_confirmation>確認密碼</label><input type=password placeholder=# name=password_confirmation ng-required=true ng-model=form.password_confirmation ng-class="{error: resetform.password_confirmation.$invalid &amp;&amp; !resetform.password_confirmation.$pristine}" ng-minlength=8 ng-maxlength=32 class=password><p class=error><span ng-show="resetform.password_confirmation.$invalid &amp;&amp; !resetform.password_confirmation.$pristine">密碼至少8個字</span><span ng-show="(form.password != form.password_confirmation) &amp;&amp; !resetform.password_confirmation.$pristine">&nbsp;確認密碼需與密碼相同</span></p><button type=submit ng-disabled=!resetable(resetform) ng-click=reset() class=btn>更新密碼</button><ul><li><a ui-sref=landing>返回</a></li><li><a ui-sref=landing.register>註冊</a></li></ul></form>'),a.put("components/form/session/register.html",'<form id=reg name=regform novalidate><label for=school>學校<i ng-show=loadingSclist class="fa fa-spin fa-dot-circle-o"></i></label><input id=school name=moeid typeahead="sc as sc.name for sc in get_school_list($viewValue)" typeahead-persistent=0 typeahead-loading=loadingSclist typeahead-on-select="set_moeid($item, $model, $label)" typeahead-wait-ms=10 placeholder=選擇學校 ng-required=ng-required ng-class="{error: moeid_not_set() &amp;&amp; !regform.moeid.$pristine}" ng-model=school><p ng-show="moeid_not_set() &amp;&amp; !regform.moeid.$pristine" class=error><span>必填欄位(請從清單中選擇學校)</span></p><label for=email>電郵</label><input id=email type=email name=email placeholder=@ ng-required=true ng-model=form.email ng-class="{error: regform.email.$invalid &amp;&amp; !regform.email.$pristine}" ng-minlength=8 ng-maxlength=32><p ng-show="regform.email.$invalid &amp;&amp; !regform.email.$pristine" class=error>Email 格式錯誤</p><div class=half><label for=name>名字(本測驗需以真實姓名報名)</label><input id=name name=uname placeholder=OOO ng-required=true ng-model=form.name ng-class="{error: regform.uname.$invalid &amp;&amp; !regform.uname.$pristine}" ng-minlength=2 ng-maxlength=8><p ng-show="regform.uname.$invalid &amp;&amp; !regform.uname.$pristine" class=error><span>必填欄位</span><span ng-show=regform.uname.$error.minlength>(太短)</span><span ng-show=regform.uname.$error.maxlength>(太長)</span></p></div><div class=half><label for=phone>電話</label><input id=phone type=phone placeholder=# name=phone ng-model=form.phone ng-pattern="/^[0-9]+$/" ng-class="{error: regform.phone.$invalid &amp;&amp; !regform.phone.$pristine}" ng-minlength=5 ng-maxlength=20><p ng-show="regform.phone.$invalid &amp;&amp; !regform.phone.$pristine" class=error><span>電話格式錯誤</span><span ng-show=regform.phone.$error.minlength>(太短)</span><span ng-show=regform.phone.$error.maxlength>(太長)</span></p></div><input id=role type=checkbox ng-model=form.as_teacher><label for=role>註冊為教師</label><button type=submit ng-disabled=!registerable(regform) ng-click=register(regform) class=btn>註冊</button><ul><li><a ui-sref=session.login>登入</a></li><li><a ui-sref=landing>返回</a></li></ul></form>'),a.put("components/form/session/student.html",'<form id=login name=loginform novalidate><label for=school>學校<i ng-show=loadingSclist class="fa fa-spin fa-dot-circle-o"></i></label><input id=school name=moeid typeahead="sc as sc.name for sc in get_school_list($viewValue)" typeahead-persistent=0 typeahead-loading=loadingSclist typeahead-on-select="set_moeid($item, $model, $label)" typeahead-wait-ms=10 placeholder=選擇學校 ng-class="{error: moeid_not_set() &amp;&amp; !loginform.moeid.$pristine}" ng-model=school><p ng-show="moeid_not_set() &amp;&amp; !loginform.moeid.$pristine" class=error><span>必填欄位(請從清單中選擇學校)</span></p><label for=login_alias>帳號</label><input id=login_alias name=login_alias placeholder=學號 ng-required=true ng-model=form.login_alias ng-class="{error: loginform.login_alias.$invalid &amp;&amp; !loginform.login_alias.$pristine}" ng-minlength=5 ng-maxlength=32><p ng-show="loginform.login_alias.$invalid &amp;&amp; !loginform.login_alias.$pristine" class=error>帳號格式錯誤</p><label for=password>密碼</label><input type=password placeholder=# name=password ng-required=true ng-model=form.password ng-class="{error: loginform.password.$invalid &amp;&amp; !loginform.password.$pristine}" ng-minlength=8 ng-maxlength=32 class=password><p class=error><span ng-show="loginform.password.$invalid &amp;&amp; !loginform.password.$pristine">密碼至少8個字</span></p><button type=submit ng-disabled=!loginable(loginform) ng-click=login(loginform) class=btn>登入</button><br></form>'),a.put("components/navbar/navbar.html",'<div ng-controller=NavbarCtrl class="navbar navbar-default navbar-static-top"><div class=container><div class=navbar-header><button type=button ng-click="isCollapsed = !isCollapsed" class=navbar-toggle><span class=sr-only>Toggle navigation</span><span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button><a href="/" class=navbar-brand>bras-fe</a></div><div id=navbar-main collapse=isCollapsed class="navbar-collapse collapse"><ul class="nav navbar-nav"><li ng-repeat="item in menu" ng-class="{active: isActive(item.link)}"><a ng-href={{item.link}}>{{item.title}}</a></li></ul></div></div></div>')
}]);